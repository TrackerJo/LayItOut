import{r as n,j as s}from"./index-QIV6qY6h.js";import{X as j}from"./section-ADRdvFWR.js";import"./firestore-BzzbFXtm.js";const K="/LayItOut/assets/forward-Drovs4r6.png",w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEaADAAQAAAABAAAAEQAAAACOk5MBAAAB2klEQVQ4EaVSPUgcURCeeRvvciqoCRg7RQt/1uCd2gTEJoq6WlskjT+gKFoIAbUQuygWpgoGQYR0IbGwuENJygs2eqeEzdNGEAStlEMQOb03zvNYecoV3vmK3W/nm+/j25mH8IwTlM6sUHBq5erR4Dq9FuJXAgxgLiaV221Fxfm+fUIsBUi1iFxMivJ984BYhkRL8dqNrRfZmoRk5zvWDBPQ8eVZYlrrs0uy3ZSHZC0jxyAFYwctfy+0SVZJggVvPrGmnlOs7dqRdW2gz5OT1P/rqhKAMwCUuKLUeFqefoqQdKYaXaffLGbCeRYucT0ACiZl3eaJ2aOTTJCAlQbp9JiEiYNu10dEbAeCaMyOLJucxoIHNJQG+D0Y76zQ2Dy22/EKBS4SQRJSd71k8hoLPSCe9hwilOBL8dN2bZ/Z5ENrgflSQvocexuWJufhu8HGfoRniOg3Nzf7sfyLR4b+O62AMMCcvFZHc1798fv+2tfI968D5N/hfy/nFX5IqqM1v6jYY1ytlGrdszeij8Xe972JLjTK7iZeYZQIb/g6/QLAPk7xLV4XGfEEmd4P7kmsNrzDKxzl+RRqAyA6SVwmpzIJzdoDE03wClcV0QJv45xTDB42/0mYgkz4FmD8ocR4cNFcAAAAAElFTkSuQmCC";function V({booth:e,isViewingBooth:g,isSelected:r,onDeselect:p,onPickBooth:L,onSelect:Q,isUnselecting:o,visible:k,cellSize:i,canPick:C}){const[A,u]=n.useState(0),[c,x]=n.useState(0),f=n.useRef(null),[W,E]=n.useState(0),[q,v]=n.useState(0),[y,O]=n.useState(!1),[d,$]=n.useState(null),[R,Y]=n.useState(12),F=n.useRef(null),[B,M]=n.useState(!0);function I(t){const a=f.current,m=window.getComputedStyle(a),l=document.createElement("span");l.style.font=m.font,l.style.fontSize=t+"px",l.style.fontFamily=m.fontFamily,l.style.fontWeight=m.fontWeight,l.style.position="absolute",l.style.visibility="hidden",l.style.whiteSpace="nowrap",l.textContent=a.textContent,document.body.appendChild(l);const J=l.offsetWidth;return document.body.removeChild(l),J}function N(t){if(f.current){const a=f.current;return I(t-1)>a.offsetWidth&&t-1>8?N(t-1):t-1}return t}n.useEffect(()=>{setTimeout(()=>{f.current&&Y(N(R))},100)},[]),n.useEffect(()=>{e.initialElement.classList.contains("cell")&&(console.log("Setting cell to initial element:",e.initialElement.children[0]),$(e.initialElement.children[0])),u(e.initialElement.offsetLeft),x(e.initialElement.offsetTop),E(e.initialElement.offsetLeft),v(e.initialElement.offsetTop)},[e]);const T=()=>{if(y)return;if(d==null){u(e.initialElement.offsetLeft),E(e.initialElement.offsetLeft),x(e.initialElement.offsetTop),v(e.initialElement.offsetTop);return}const t=d.offsetTop,a=d.offsetLeft;u(a),x(t),E(a),v(t)};return n.useEffect(()=>(window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)}),[d,y]),A==0||c==0||!B?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{id:e.id,ref:F,className:`booth draggable-item ${g?"viewing":""} ${y?"dragging":r?"selected":""} ${e.user!=null&&!g?"no-select":""} ${k?"":"invisible"} ${C?"":"cannot-pick"}`,style:{top:`${c}px`,left:`${A}px`,width:`${e.cellsLong*i-(r?4:0)}px`,height:`${e.cellsTall*i-(r?4:0)}px`,transformOrigin:"center center",fontSize:`${R}px`},onClick:t=>{t.stopPropagation(),!g&&e.user==null&&C&&(r?p():Q(e.id))},children:s.jsx("div",{className:"custom-icon",children:s.jsxs("div",{className:"booth-inner",children:[s.jsx("p",{children:e.name}),s.jsxs("p",{className:"booth-sizing",children:[e.cellsLong,"ft x ",e.cellsTall,"ft"]}),s.jsx("p",{ref:f,children:e.user==null?"Open":e.user.businessName})]})})}),(r||o)&&s.jsx(s.Fragment,{children:/Mobi|Android/i.test(navigator.userAgent)?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`draggable-item-options mobile-left ${o?"exiting":""}`,style:{top:`${c+e.cellsTall*i/2-10}px`,left:`${A+e.cellsLong*i/2-e.cellsLong/2-20}px`,width:"10px"},children:s.jsx("img",{src:w,alt:"pick",className:"pick-icon",onClick:t=>{t.stopPropagation(),L(e.id)}})}),s.jsx("div",{className:`draggable-item-options mobile-right ${o?"exiting":""}`,style:{top:`${c+e.cellsTall*i/2-10}px`,left:`${A+e.cellsLong*i/2+e.cellsLong*i/2+10}px`,width:"10px"},children:s.jsx("img",{src:j,alt:"delete",className:"delete-icon",onClick:t=>{t.stopPropagation(),p()}})})]}):s.jsxs("div",{className:`draggable-item-options ${o?"exiting":""}`,style:{top:`${c+e.cellsTall*i/2-e.cellsTall*i/2-20}px`,left:`${A+e.cellsLong*i/2-e.cellsLong*i/2}px`,width:`${e.cellsLong*i}px`},children:[s.jsx("img",{src:w,alt:"pick",className:"pick-icon",onClick:t=>{t.stopPropagation(),L(e.id)}}),s.jsx("img",{src:j,alt:"delete",className:"delete-icon",onClick:t=>{t.stopPropagation(),p()}})]})})]})}export{V as B,K as F};
