import{j as e,r,c as M}from"./index-CIvrVTT1.js";import{l as f,i as B}from"./auth-iroOyPOj.js";import{D as G,A as S,B as R,d as D,a as Z,b as L,c as P,e as F,f as J,g as H,h as Y,i as O}from"./firestore-BIrJGVi9.js";import{T as w,L as Q}from"./link-DQZq8SUn.js";const E="/LayItOut/assets/person-B6dEeLiq.png",W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE02lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI1LTA4LTA1PC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPjczNzgwNjZhLTY1ZDEtNGI2MC1hYzBhLTY2N2M4OWFkMGMyYzwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6RmJJZD41MjUyNjU5MTQxNzk1ODA8L0F0dHJpYjpGYklkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6ZGM9J2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJz4KICA8ZGM6dGl0bGU+CiAgIDxyZGY6QWx0PgogICAgPHJkZjpsaSB4bWw6bGFuZz0neC1kZWZhdWx0Jz5hZGQtaXRlbSAtIDM8L3JkZjpsaT4KICAgPC9yZGY6QWx0PgogIDwvZGM6dGl0bGU+CiA8L3JkZjpEZXNjcmlwdGlvbj4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnBkZj0naHR0cDovL25zLmFkb2JlLmNvbS9wZGYvMS4zLyc+CiAgPHBkZjpBdXRob3I+U2FyYWggS2VtbWVOYXNoPC9wZGY6QXV0aG9yPgogPC9yZGY6RGVzY3JpcHRpb24+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp4bXA9J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8nPgogIDx4bXA6Q3JlYXRvclRvb2w+Q2FudmEgKFJlbmRlcmVyKSBkb2M9REFHdTJ5dUVOWkEgdXNlcj1VQUZqR1c2eHRDUSBicmFuZD1bQVJDSElWRURdIEZvcnQgV2F5bmUgQ29tbXVuaXR5IFNjaG9vbHMgdGVtcGxhdGU9PC94bXA6Q3JlYXRvclRvb2w+CiA8L3JkZjpEZXNjcmlwdGlvbj4KPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0ncic/Puza03IAAANVSURBVHic7dw/aBNRAMfxX/+AdrDkFAcX5QIqLi7BMRW5JSIOiruoxE6CQxE8cHE4HCsiFOPg5ORkHeJwFHKjZqiI6HIHBd3snX/Aoi11aBwEW5Lz3rvfld9nbF7z3vG9cJeXkDEIlbGyFyB/UxAyCkJGQcgoCBkFIaMgZBSEjIKQURAyCkJGQcgoCBkFIaMgZBSEjIKQURAyCkJGQcgoCBkFIaMgZHZFENfzJwEgCYP1stfyvyobpOY2p+uef9upz1wGcGjw509p3HsSh8G9LIm+lbm+vCoZpOY29zba3S6A09sMWep3WueyJPphc11FGC97AXk02t0H2D4GAJxptLvzttZTpMoFcT3/AIArQwy9WnOb+0yvp2iVCwLgBICJIcZNOvXmSdOLKVoVg4xy1usVYsEoNyKVu2mpYpBdTUHIKAgZBSGjIGQUhIyCkFEQMgpCRkHIKAgZBSEzaXtC1/OnARwHsB85Nv8ct9kYaaznb446B4BNAKsAPiRh8DXH/+dmbTe05jb3NNrd+wCuoYQTIad1AI/6ndbNLIl+2ZjQSpCa25xotLuLAM7amM+AxX6ndSFLog3TE1m5htQ9/waqGwMAzg+OwTgrQZz6zKyNeUyydQzGg7ieP4ati3jVHRsci1G2bnsr91HqP1g5BuNBkjDYBPDe9DwWLA+OxSgrr5A07j22MY9JadxbsDGPlSBxGMwDeGFjLkOex2Fg5aSyEiRLoo1+p3UJQAeA8Xv5Aq2mce9Wv9O6aOM9CFDCxbaArZNTTn3m7jBj07h3J02i16POga2tk89pHC3beof+h/UtjMHe0KvcT+D54059ZqihaRL1kzDo5p6rBNrtJaMgZBSEjIKQURAyCkJGQcgoCBkFIaMgZBSEjIKQURAyVQySjTDW6rcOi1C5IGkcvQHwc4ihGwDeGl5O4SoXJEui79j65HFHadxbSMLgi4UlFapyQQCg32nNAXi5w5ClOAzmbK2nSMP8iAudtWxlPY2jp1PO4ZUp58hRAAcHD31M497Dd89mr2dJtFbmGvPaDV9g00/8iTkKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpD5DYoct+vaJyOJAAAAAElFTkSuQmCC";function z({area:n,onClick:p,deleteArea:i}){return e.jsx("div",{className:"area-tile",onClick:()=>p(n.id),children:e.jsxs("div",{className:"area-tile-content",children:[e.jsx("div",{className:"area-preview-container",children:e.jsx("img",{src:n.previewImage,alt:"",className:"area-preview-img"})}),e.jsxs("div",{className:"area-info",children:[e.jsx("h3",{children:n.name}),e.jsx("div",{className:"area-actions",children:e.jsx("img",{src:w,alt:"",className:"area-trash",onClick:async l=>{l.stopPropagation(),window.confirm("By clicking OK, you will delete this area and all of the designs using this area. Are you sure?")&&i(n.id)}})})]})]})})}function X({dialogRef:n,closeDialog:p,createDesign:i,areas:l}){const[o,m]=r.useState(""),[g,u]=r.useState(!1),[t,j]=r.useState(null),[h,c]=r.useState(null);async function y(){if(o.trim()===""){alert("Design name cannot be empty");return}if(!t){alert("Please select an area");return}u(!0);const s=new G({id:(Math.random()*1e6).toString(),name:o,areaId:t.id,sections:t.sections,previewImage:t.previewImage,inventoryItems:[...t.inventoryItems]});h&&(s.sections=h.sections,s.previewImage=h.previewImage,s.inventoryItems=h.inventoryItems),await i(s),u(!1),m(""),j(null),c(null)}return e.jsxs("dialog",{ref:n,className:"create-design-dialog",children:[e.jsxs("div",{className:"create-design-dialog-div",children:[e.jsx("h2",{children:"Create Design"}),e.jsxs("div",{className:"create-design-row",children:[e.jsx("label",{htmlFor:"design-name",children:"Name:"}),e.jsx("input",{type:"text",id:"design-name",name:"design-name",onChange:s=>m(s.target.value??""),value:o})]}),e.jsxs("div",{className:"create-design-row",children:[e.jsx("label",{htmlFor:"design-area",children:"Area:"}),e.jsxs("select",{id:"design-area",name:"design-area",onChange:s=>{const I=s.target.value,x=l.find(a=>a.id===I)||null;j(x)},value:t?.id||"",children:[e.jsx("option",{value:"",children:"Select an area"}),l.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),t&&t.templates.length>0&&e.jsxs("div",{className:"create-design-row",children:[e.jsx("label",{htmlFor:"design-area",children:"Template:"}),e.jsxs("select",{id:"design-area",name:"design-area",onChange:s=>{const I=s.target.value,x=t.templates.find(a=>a.id===I)||null;c(x)},value:h?.id||"",children:[e.jsx("option",{value:"",children:"Select a template (Optional)"}),t.templates.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx("button",{className:"action-btn",onClick:y,children:"Create"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:()=>{p(),m(""),j(null),c(null)},children:"Close"})]}),g&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"loader"})})]})}function U({design:n,areaName:p,onClick:i,deleteDesign:l}){return e.jsxs("div",{className:"design-tile",onClick:()=>i(n.id),children:[e.jsx("div",{className:"design-preview-container",children:e.jsx("img",{src:n.previewImage,alt:"",className:"design-preview-img"})}),e.jsxs("div",{className:"design-info",children:[e.jsx("h3",{children:n.name}),e.jsxs("p",{className:"design-area-name",children:["Area: ",p]}),e.jsxs("div",{className:"design-actions",children:[e.jsx("img",{src:Q,alt:"",className:"design-link",onClick:async o=>{o.stopPropagation();const m=localStorage.getItem("companyId"),g=window.location.origin+`/LayItOut/Layout/?companyId=${m}&areaId=${n.areaId}&type=client-edit-design&designId=${n.id}&designName=${n.name}`;await navigator.clipboard.writeText(g),alert("Design link copied to clipboard!")}}),e.jsx("img",{src:w,alt:"",className:"design-trash",onClick:async o=>{o.stopPropagation(),window.confirm("By clicking OK, you will delete this design. Are you sure?")&&l(n.id)}})]})]})]})}function T({dialogRef:n,closeDialog:p}){return e.jsx("dialog",{ref:n,className:"account-dialog",children:e.jsxs("div",{className:"account-dialog-div",children:[e.jsx("h2",{children:"Account Settings"}),e.jsx("button",{className:"action-btn",onClick:()=>{f(),p()},children:"Log Out"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:p,children:"Close"})]})})}function V({dialogRef:n,closeDialog:p,createArea:i}){const[l,o]=r.useState(""),[m,g]=r.useState(10),[u,t]=r.useState(10),[j,h]=r.useState(!1);return e.jsxs("dialog",{ref:n,className:"create-area-dialog",children:[e.jsxs("div",{className:"create-area-dialog-div",children:[e.jsx("h2",{children:"Create Area"}),e.jsxs("div",{className:"create-area-row",children:[e.jsx("label",{htmlFor:"area-name",children:"Name:"}),e.jsx("input",{type:"text",id:"area-name",name:"area-name",onChange:c=>o(c.target.value??""),value:l})]}),e.jsxs("div",{className:"create-area-row create-area-size",children:[e.jsx("label",{htmlFor:"area-width",children:"Size (in feet):"}),e.jsx("input",{type:"number",id:"area-width",name:"area-width",min:"1",value:m,onChange:c=>g(parseFloat(c.target.value)??1)}),e.jsx("span",{children:" x "}),e.jsx("input",{type:"number",id:"area-height",name:"area-height",min:"1",value:u,onChange:c=>t(parseFloat(c.target.value)??1)})]}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:async()=>{if(l.trim()===""){alert("Area name cannot be empty");return}if(m<=0||u<=0){alert("Area dimensions must be greater than zero");return}h(!0);const c=new S({name:l,width:m,height:u,id:l.toLowerCase().replace(/\s+/g,"-")+"-"+Date.now(),previewImage:"",sections:[],templates:[],inventoryItems:[]});await i(c),h(!1),o(""),g(1),t(1)},children:"Create Area"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:()=>{o(""),g(10),t(10),p()},children:"Close"})]}),j&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"loader"})})]})}function K({dialogRef:n,closeDialog:p,createBoothMap:i,areas:l}){const[o,m]=r.useState(""),[g,u]=r.useState(!1),[t,j]=r.useState(null),[h,c]=r.useState(null);async function y(){if(o.trim()===""){alert("BoothMap name cannot be empty");return}if(!t){alert("Please select an area");return}u(!0);const s=new R({id:(Math.random()*1e6).toString(),name:o,areaId:t.id,sections:t.sections,previewImage:t.previewImage,inventoryItems:[...t.inventoryItems]});h&&(s.sections=h.sections,s.previewImage=h.previewImage,s.inventoryItems=h.inventoryItems),await i(s),window.location.href=`/LayItOut/Layout/?companyId=${localStorage.getItem("companyId")}&areaId=${s.areaId}&type=create-boothMap&boothMapId=${s.id}&boothMapName=${s.name}`,u(!1),m(""),j(null),c(null)}return e.jsxs("dialog",{ref:n,className:"create-boothMap-dialog",children:[e.jsxs("div",{className:"create-boothMap-dialog-div",children:[e.jsx("h2",{children:"Create Booth Map"}),e.jsxs("div",{className:"create-boothMap-row",children:[e.jsx("label",{htmlFor:"boothMap-name",children:"Name:"}),e.jsx("input",{type:"text",id:"boothMap-name",name:"boothMap-name",onChange:s=>m(s.target.value??""),value:o})]}),e.jsxs("div",{className:"create-boothMap-row",children:[e.jsx("label",{htmlFor:"boothMap-area",children:"Area:"}),e.jsxs("select",{id:"boothMap-area",name:"boothMap-area",onChange:s=>{const I=s.target.value,x=l.find(a=>a.id===I)||null;j(x)},value:t?.id||"",children:[e.jsx("option",{value:"",children:"Select an area"}),l.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),t&&t.templates.length>0&&e.jsxs("div",{className:"create-boothMap-row",children:[e.jsx("label",{htmlFor:"boothMap-area",children:"Template:"}),e.jsxs("select",{id:"boothMap-area",name:"boothMap-area",onChange:s=>{const I=s.target.value,x=t.templates.find(a=>a.id===I)||null;c(x)},value:h?.id||"",children:[e.jsx("option",{value:"",children:"Select a template (Optional)"}),t.templates.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx("button",{className:"action-btn",onClick:y,children:"Create"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:()=>{p(),m(""),j(null),c(null)},children:"Close"})]}),g&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"loader"})})]})}function $({boothMap:n,areaName:p,onClick:i,deleteBoothMap:l}){return e.jsxs("div",{className:"boothMap-tile",onClick:()=>i(n.id),children:[e.jsx("div",{className:"boothMap-preview-container",children:e.jsx("img",{src:n.previewImage,alt:"",className:"boothMap-preview-img"})}),e.jsxs("div",{className:"boothMap-info",children:[e.jsx("h3",{children:n.name}),e.jsxs("p",{className:"boothMap-area-name",children:["Area: ",p]}),e.jsx("div",{className:"boothMap-actions",children:e.jsx("img",{src:w,alt:"",className:"boothMap-trash",onClick:async o=>{o.stopPropagation(),window.confirm("By clicking OK, you will delete this BoothMap. Are you sure?")&&l(n.id)}})})]})]})}M.createRoot(document.getElementById("root")).render(e.jsx(q,{}));function q(){const[n,p]=r.useState(/Mobi|Android/i.test(navigator.userAgent)),[i,l]=r.useState("designs"),[o,m]=r.useState([]),[g,u]=r.useState([]),[t,j]=r.useState([]),[h,c]=r.useState(!0),y=r.useRef(null),s=r.useRef(null),I=r.useRef(null),x=r.useRef(null);return r.useEffect(()=>{B();const d=new URLSearchParams(window.location.search).get("view");d==="designs"?l("designs"):d==="areas"?l("areas"):d==="boothmaps"&&l("boothmaps");async function k(){const A=localStorage.getItem("companyId");if(!A){f();return}const b=await H(A),N=[];(await Promise.all(b.map(v=>Y(A,v.id)))).forEach(v=>{N.push(...v)});const C=[];(await Promise.all(b.map(v=>O(A,v.id)))).forEach(v=>{C.push(...v)}),u([...b]),m([...C]),j([...N]),c(!1)}k()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"App",children:[e.jsx("h1",{className:"title",children:"LayItOut"}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loader-backdrop"}),e.jsx("div",{className:"loader"})]}),e.jsxs("div",{className:"dashboard",children:[e.jsxs("div",{className:"sidebar",children:[e.jsx("div",{className:"account-div",children:e.jsx("img",{src:E,alt:"Account Icon",className:"account-icon",onClick:()=>{y.current?.showModal()}})}),e.jsxs("div",{className:"nav-buttons",children:[e.jsx("button",{className:`nav-button ${i=="designs"?"selected":""}`,onClick:()=>l("designs"),children:"Designs"}),e.jsx("button",{className:`nav-button ${i=="boothmaps"?"selected":""}`,onClick:()=>l("boothmaps"),children:"Booth Maps"}),e.jsx("button",{className:`nav-button ${i=="areas"?"selected":""}`,onClick:()=>l("areas"),children:"Areas"})]})]}),e.jsxs("div",{className:"content",children:[i=="designs"&&o.length==0&&e.jsx("div",{className:"no-designs",children:e.jsx("h3",{children:"No Designs Yet"})}),i=="areas"&&g.length==0&&e.jsx("div",{className:"no-areas",children:e.jsx("h3",{children:"No Areas Yet"})}),i=="boothmaps"&&t.length==0&&e.jsx("div",{className:"no-boothmaps",children:e.jsx("h3",{children:"No BoothMaps Yet"})}),i=="areas"&&e.jsx("div",{className:"area-tiles",children:g.map(a=>e.jsx(z,{area:a,onClick:()=>{const d=localStorage.getItem("companyId");window.location.href=`/LayItOut/Layout/?companyId=${d}&areaId=${a.id}&type=view-area`},deleteArea:async()=>{u(g.filter(d=>d.id!==a.id)),m(o.filter(d=>d.areaId!==a.id)),c(!0),await D(localStorage.getItem("companyId"),a.id),c(!1)}},a.id))}),i=="designs"&&e.jsx("div",{className:"design-tiles",children:o.map(a=>e.jsx(U,{areaName:g.find(d=>d.id==a.areaId)?.name||"",design:a,onClick:()=>{const d=localStorage.getItem("companyId");window.location.href=`/LayItOut/Layout/?companyId=${d}&areaId=${a.areaId}&type=view-design&designId=${a.id}&designName=${a.name}`},deleteDesign:async()=>{m(o.filter(d=>d.id!==a.id)),c(!0),await Z(localStorage.getItem("companyId"),a.areaId,a.id),c(!1)}},a.id))}),i=="boothmaps"&&e.jsx("div",{className:"boothmap-tiles",children:t.map(a=>e.jsx($,{areaName:g.find(d=>d.id==a.areaId)?.name||"",boothMap:a,onClick:()=>{const d=localStorage.getItem("companyId");window.location.href=`/LayItOut/Layout/?companyId=${d}&areaId=${a.areaId}&type=view-boothMap&boothMapId=${a.id}&boothMapName=${a.name}`},deleteBoothMap:async()=>{j(t.filter(d=>d.id!==a.id)),c(!0),await L(localStorage.getItem("companyId"),a.areaId,a.id),c(!1)}},a.id))}),i=="designs"||!n?e.jsx("div",{className:"plus-icon",onClick:()=>{i=="designs"?s.current?.showModal():i=="boothmaps"?x.current?.showModal():i=="areas"&&I.current?.showModal()},children:e.jsx("img",{src:W,alt:"Plus Icon"})}):null]})]})]}),e.jsx(X,{areas:g,dialogRef:s,closeDialog:()=>s.current?.close(),createDesign:async a=>{m([...o,a]),await P(localStorage.getItem("companyId"),a.areaId,a),s.current?.close()}}),e.jsx(T,{dialogRef:y,closeDialog:()=>y.current?.close()}),e.jsx(V,{dialogRef:I,closeDialog:()=>I.current?.close(),createArea:async a=>{await F(localStorage.getItem("companyId"),a),u([...g,a]),I.current?.close(),window.location.href=`/LayItOut/Layout/?companyId=${localStorage.getItem("companyId")}&areaId=${a.id}&type=create-area&stage=placing-sections`}}),e.jsx(K,{areas:g,dialogRef:x,closeDialog:()=>x.current?.close(),createBoothMap:async a=>{j([...t,a]),await J(localStorage.getItem("companyId"),a.areaId,a),x.current?.close()}})]})}
