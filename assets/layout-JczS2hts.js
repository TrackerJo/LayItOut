import{r as g,j as o,I as k,C as T,T as le,S as Q,a as ee,b as re,c as $e,s as Ee,d as _e}from"./firestore-DhivQkY_.js";import{A as ge,S as pe,D as Ce}from"./section-DHnegUv1.js";function el({inventoryItem:a,addDraggingItem:V,removeItem:I}){const G=g.useRef(null),P=g.useRef(null),[B,Z]=g.useState(12),[H,F]=g.useState(a.item);function N(w){const y=P.current,K=window.getComputedStyle(y),S=document.createElement("span");S.style.font=K.font,S.style.fontSize=w+"px",S.style.fontFamily=K.fontFamily,S.style.fontWeight=K.fontWeight,S.style.position="absolute",S.style.visibility="hidden",S.style.whiteSpace="nowrap",S.textContent=y.textContent,document.body.appendChild(S);const L=S.offsetWidth;return document.body.removeChild(S),L}function J(w){if(P.current){const y=P.current;return N(w-1)>y.offsetWidth&&w-1>8?J(w-1):w-1}return w}return g.useEffect(()=>{setTimeout(()=>{P.current&&Z(J(B))},100)},[]),o.jsxs("div",{className:"display",children:[o.jsx("div",{ref:G,id:a.item.id,className:"display-item",style:{width:`${a.item.cellsLong*10}px`,height:`${a.item.cellsTall*10}px`},onMouseDown:w=>{w.preventDefault(),w.stopPropagation(),a.item.initialElement=G.current,a.item.id=a.item.name+(Math.random()*1e4).toString(),console.log("ADDING ITEM",a.item.id,"to initialElement",a.item.initialElement),F(new k({id:a.item.id,cellsLong:a.item.cellsLong,cellsTall:a.item.cellsTall,name:a.item.name,icon:a.item.icon,moveable:a.item.moveable,starterItem:a.item.starterItem,displayItem:a.item.isDisplayItem})),V(a.item)},onTouchStart:w=>{w.preventDefault(),w.stopPropagation(),a.item.initialElement=G.current,a.item.id=a.item.name+(Math.random()*1e4).toString(),console.log("ADDING ITEM",a.item.id,"to initialElement",a.item.initialElement),F(new k({id:a.item.id,cellsLong:a.item.cellsLong,cellsTall:a.item.cellsTall,name:a.item.name,icon:a.item.icon,moveable:a.item.moveable,starterItem:a.item.starterItem,displayItem:a.item.isDisplayItem})),V(a.item)},children:a.item.icon.includes("custom-")?o.jsx("div",{className:"custom-icon",children:o.jsx("div",{children:o.jsx("p",{ref:P,style:{fontSize:`${B}px`},children:a.item.icon.split("custom-")[1]})})}):o.jsx("img",{src:a.item.icon,alt:"icon"})}),o.jsx("p",{children:a.item.name}),o.jsxs("p",{className:"quantity",children:["x",a.quantity]})]})}const ll="/LayItOut/assets/plus.circle-Ce3xm00a.png";function tl({inventoryItems:a,addDraggingItem:V,maxHeight:I,removeItem:G,showAddCustomItem:P,isCreatingTemplate:B,isEditingTemplate:Z,isViewingDesign:H}){return o.jsxs("div",{className:"toolbox",style:{maxHeight:I?`${I}px`:"200px"},children:[a.map(F=>o.jsx(el,{inventoryItem:F,addDraggingItem:V,removeItem:G})),!(B||Z||H)&&o.jsx("div",{className:"add-item",onClick:()=>{P()},children:o.jsx("img",{src:ll,alt:"Add Item"})})]})}const ue="/LayItOut/assets/forward-Drovs4r6.png";function nl({dialogRef:a,closeDialog:V,layoutSections:I,isOpen:G}){const[P,B]=g.useState(0),[Z,H]=g.useState(0),[F,N]=g.useState([]),[J,w]=g.useState([...I]),y=/Mobi|Android/i.test(navigator.userAgent)?5:10;function K(L){for(const x of J)if(L.x>=x.cellId.x&&L.x<x.cellId.x+x.cellsLong&&L.y>=x.cellId.y&&L.y<x.cellId.y+x.cellsTall)return x;return null}g.useEffect(()=>{if(!G)return;console.log("Layout dialog opened, generating cells and sections",I);const L=[];let x=0,Y=0;for(const j of I)console.log("Generating cells for section",j.name,"at",j.cellId,"with size",j.cellsLong,"x",j.cellsTall),console.log("Added section Length:",j.cellsLong*y+j.cellId.x),(j.cellsLong+j.cellId.x)*y>x&&(x+=j.cellsLong*y),(j.cellsTall+j.cellId.y)*y>Y&&(Y+=j.cellsTall*y);console.log("Current width:",x,"Current height:",Y),B(x),H(Y),[...Array(Y/y).keys()].map(j=>{const r=[];[...Array(x/y).keys()].map(b=>{console.log(K(new T({x:b,y:j}))!=null?"In section":"Outside section"),r.push({id:new T({x:b,y:j}),hasItem:!1,itemId:"",mouseOver:!1,canPlaceItem:!1,mouseOverLocation:"",inSection:!1,size:y})}),L.push(r)}),N([...L]),setTimeout(()=>{const j=[...I];for(const r of j)console.log("Adding section",r.name,r.cellId),r.cellElement=document.querySelector(`.layout-dialog #${r.cellId.toId()}.cell:not(.cell-border)`),console.log("Section element found",r.cellElement);console.log("Setting sections",j),w([...j]),N([...L])},100)},[G,I]);function S(L){let x=[];return L.map(Y=>x=[...x,...Y]),x}return o.jsxs("dialog",{ref:a,className:"layout-dialog",children:[o.jsxs("div",{className:"layout-dialog-div",children:[o.jsx("h2",{children:"Layout"}),o.jsx(ge,{width:P,height:Z,cells:S(F)}),o.jsx("br",{}),o.jsx("button",{className:"layout-dialog-close",onClick:V,children:"Close"})]}),J.map(L=>o.jsx(pe,{section:L,visible:!0,cellSize:y},L.cellId.toId()))]})}const sl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE2mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI1LTA4LTAzPC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPmE2MmM1Y2UxLTIzNTYtNGE3Ny1hNTAwLTViNWJjMjE1MDU3NzwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6RmJJZD41MjUyNjU5MTQxNzk1ODA8L0F0dHJpYjpGYklkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6ZGM9J2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJz4KICA8ZGM6dGl0bGU+CiAgIDxyZGY6QWx0PgogICAgPHJkZjpsaSB4bWw6bGFuZz0neC1kZWZhdWx0Jz5VbnRpdGxlZCBkZXNpZ24gLSAxPC9yZGY6bGk+CiAgIDwvcmRmOkFsdD4KICA8L2RjOnRpdGxlPgogPC9yZGY6RGVzY3JpcHRpb24+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpwZGY9J2h0dHA6Ly9ucy5hZG9iZS5jb20vcGRmLzEuMy8nPgogIDxwZGY6QXV0aG9yPlNhcmFoIEtlbW1lTmFzaDwvcGRmOkF1dGhvcj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wPSdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvJz4KICA8eG1wOkNyZWF0b3JUb29sPkNhbnZhIChSZW5kZXJlcikgZG9jPURBR3UyeXVFTlpBIHVzZXI9VUFGakdXNnh0Q1EgYnJhbmQ9W0FSQ0hJVkVEXSBGb3J0IFdheW5lIENvbW11bml0eSBTY2hvb2xzIHRlbXBsYXRlPTwveG1wOkNyZWF0b3JUb29sPgogPC9yZGY6RGVzY3JpcHRpb24+CjwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9J3InPz7fMgZvAAADaElEQVR4nO3dO2gTAQDG8e8ujz6k6FBbUeOjKILV4CAiDgWxLqK4KM4dCuLiIIg6OQgibi5OgjgoDhZB7NIiIr6gCFFThIotaSsVtSJtadI87hykiKSNd/Uu9yX3/cZwyV3yv0fukYth27YNoWEGPQHyNwUhoyBkFISMgpBREDIKQkZByCgImajTAa88XMDTDyU/p8VXjTHg0vEGHNgeCXpSKnK8hNRyDADIFYCXI/zvwfESsujInig6N/i7prv+OO/puO6/LmB82kYtHLRzHSSZMNG9y/XTXFkMsjth4rAH4xpIFzE+XQs5tFGnoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMvwelVujU/iiGJy3s3cp9qNwPlEF6D8aDnoTAaJVFRkHIKAgZBSGjIGQUhIyCkFEQMgpCRkHIKAgZymNZfvkxZ+NtpsqXkxrAtnYTqxoMR4OHKsjQaAlDo9W/vndzq4FbvU2Ohg3FKqtzY7CH8TPfnV/GGoolpKcrhp6uWNXHO5Au4tqjvKvnhGIJqSUKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByFAGsSwgm6+N35V7jTLIubs5nLyRxdg3K+hJqTrKIOlJC7kCMDKlIBQW7yRsUk6dv0L4lrkpCBkFIeP6FO67CQslq1j2+I71Jra0qu//ch2kP1VEf6r88XgU6DvbhMa4s8tdZGmezdJrWwxEwvcbTc+5XkIuHIv7fke5MNNKn4yCkFEQMgpCRkHIUH9dujmYx+1nhbLHkwkT5482wKjDXR7qIDNZYCZbfqLqyWwJZ7pttDTVXxHqIMvdanzdGqMuYwDkQby61Xgt0UadTLhmv2XM5Wxc7lvA1E9vL6xYyYUaCgLg4xcLqQzH+XsFAZDcFMHpQzHML3j7up++Wnjh8k9kFARAxARO7PP+N4gD6aLrINqokwlsCUllSrj3qoBihRmoxLFar6rAgjwYKuLNWOVPfHaJvfR6F1iQnq4Ytrcvvca88/z38avVzfW5N15JYEE62kx0tFUOUo8HD/9FG3UyCkJGQcgoCBnPLiX1w/sJC1aVxuWH4c/ud6QM27Ydfdnvvjrv+sXlj8GLzY6Gc7zK2unzHxLXs2TC+WfneAmR6tBsT0ZByCgIGQUhoyBkFISMgpBREDIKQuYX+jTA4JQOFzkAAAAASUVORK5CYII=",ol="/LayItOut/assets/template-Cjj8EPhc.png";function al({dialogRef:a,closeDialog:V,templates:I,isOpen:G,isViewingArea:P}){const[B,Z]=g.useState([]),[H,F]=g.useState([]),N=5,[J,w]=g.useState([]),[y,K]=g.useState(/Mobi|Android/i.test(navigator.userAgent)),[S,L]=g.useState([]);function x(r,b,v){const R=[],U=I.filter(h=>r.some(A=>A.name===h.name));U.sort((h,A)=>r.indexOf(h)-r.indexOf(A));for(const h of U){const A=[];let M=0,q=0;for(const f of h.sections)console.log("Generating cells for section",f.name,"at",f.cellId,"with size",f.cellsLong,"x",f.cellsTall),console.log("Added section Length:",f.cellsLong*N+f.cellId.x),(f.cellsLong+f.cellId.x)*N>M&&(M+=f.cellsLong*N),(f.cellsTall+f.cellId.y)*N>q&&(q+=f.cellsTall*N);console.log("Current width:",M,"Current height:",q),[...Array(q/N).keys()].map(f=>{const D=[];[...Array(M/N).keys()].map(_=>{D.push({id:new T({x:_,y:f}),hasItem:!1,itemId:"",mouseOver:!1,canPlaceItem:!1,mouseOverLocation:"",inSection:!1,size:N})}),A.push(D)}),R.push({width:M,height:q,templateName:h.name,cells:A})}F([...R]),setTimeout(()=>{const h=[],A=[];for(const M of U){const q=[];for(const f of M.sections)console.log("Adding section",f.name,f.cellId,M.name.split(" ").join("-")),f.cellElement=document.querySelector(`.template-dialog #${M.name.split(" ").join("-")} #${f.cellId.toId()}.cell:not(.cell-border)`),console.log("Section element found",f.cellElement),h.push(f),q.push(...f.startingItems.map(D=>new ee({cell:new T({x:f.cellId.x+D.cell.x,y:f.cellId.y+D.cell.y}),item:new k({id:D.item.id,name:D.item.name,cellsLong:D.item.cellsLong,cellsTall:D.item.cellsTall,icon:D.item.icon,initialElement:document.querySelector(`.template-dialog #${M.name.split(" ").join("-")} #${D.cell.toId()}.cell:not(.cell-border)`),starterItem:!0,moveable:D.item.moveable,rotation:D.item.rotation||0})})));for(const f of q){console.log("Placing starting item",f.item.name,f.cell);for(let D=0;D<f.item.cellsTall;D++)for(let _=0;_<f.item.cellsLong;_++)R[R.findIndex(ae=>ae.templateName==M.name)].cells[f.cell.y+D][f.cell.x+_].hasItem=!0,R[R.findIndex(ae=>ae.templateName==M.name)].cells[f.cell.y+D][f.cell.x+_].itemId=f.item.id;f.item.initialElement=document.querySelector(`.template-dialog #${M.name.split(" ").join("-")} #${f.cell.toId()}.cell:not(.cell-border)`),console.log("Adding item to items",f.item.initialElement),A.push(new k({id:f.item.id,name:f.item.name,cellsLong:f.item.cellsLong,cellsTall:f.item.cellsTall,icon:f.item.icon,initialElement:f.item.initialElement,starterItem:!0,moveable:f.item.moveable,rotation:f.item.rotation||0}))}}w(M=>[...A]),Z([...h])},100)}g.useEffect(()=>{if(G&&(console.log("Layout dialog opened, generating cells and sections",I),I.length!==0)){if(I.length==1){x([I[0]]);return}L(y?[I[0].name]:[I[0].name,I[1].name])}},[G,I]),g.useEffect(()=>{const r=I.filter(b=>S.includes(b.name));console.log("Viewing templates:",S),r.sort((b,v)=>S.indexOf(b.name)-S.indexOf(v.name)),console.log("Generating templates for",r.map(b=>b.name)),x(r)},[S]);function Y(r){let b=[];return r.map(v=>b=[...b,...v]),b}function j(r,b){if(I.length==1)return!0;const v=I.filter(R=>b.includes(R.name));console.log("Viewing templates",v);for(const R of v)for(const U of R.sections)if(U.startingItems.some(h=>h.item.id==r.id))return!0;return!1}return o.jsxs("dialog",{ref:a,className:"template-dialog",children:[o.jsxs("div",{className:"template-dialog-div",children:[o.jsx("h2",{children:"Templates"}),o.jsxs("div",{className:"templates",children:[I.length>1&&I.filter(r=>!S.includes(r.name)).length>0&&o.jsx("img",{src:ue,onClick:()=>{if(y){const b=(I.findIndex(v=>v.name===S[0])-1+I.length)%I.length;L([I[b].name])}else L(r=>{const v=(I.findIndex(R=>R.name===r[0])-1+I.length)%I.length;return[I[v].name,r[0]]})},className:"back-mobile-areas"}),H.map((r,b)=>o.jsxs("div",{children:[o.jsx(ge,{width:r.width,height:r.height,cells:Y(r.cells),id:r.templateName.split(" ").join("-"),visibile:!0},b),o.jsx("h3",{children:r.templateName}),o.jsx("button",{className:"template-select-btn",onClick:()=>{if(P){const v=new URLSearchParams(window.location.search),R=v.get("companyId"),U=v.get("areaId");window.location.href=`/LayItOut/Layout/?companyId=${R}&areaId=${U}&type=edit-template&templateId=${I.find(h=>h.name==r.templateName).id}`}else{const v=I.find(h=>h.name===r.templateName),R=new le({name:v.name,id:v.id,sections:v.sections.map(h=>new Q({name:h.name,cellId:new T({x:h.cellId.x*(y?20:10),y:h.cellId.y*(y?20:10)}),cellsLong:h.cellsLong*(y?20:10),cellsTall:h.cellsTall*(y?20:10),startingItems:h.startingItems.map(A=>new ee({cell:new T({x:A.cell.x*(y?2:1),y:A.cell.y*(y?2:1)}),item:new k({id:A.item.id,name:A.item.name,icon:A.item.icon,cellsLong:A.item.cellsLong*2,cellsTall:A.item.cellsTall*2,starterItem:A.item.starterItem,moveable:A.item.moveable})}))}))}),U=new URLSearchParams(window.location.search);U.set("templateName",R.name),window.location.search=U.toString()}},children:P?"Edit":"Select"})]})),I.length>1&&I.filter(r=>!S.includes(r.name)).length>0&&o.jsx("img",{src:ue,onClick:()=>{if(y){const b=(I.findIndex(v=>v.name===S[0])+1)%I.length;L([I[b].name])}else L(r=>{const v=(I.findIndex(R=>R.name===r[r.length-1])+1)%I.length;return[r[1],I[v].name]})},className:"forward-mobile-areas"})]}),P&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"action-btn",onClick:()=>{const r=new URLSearchParams(window.location.search),b=r.get("companyId"),v=r.get("areaId");window.location.href=`/LayItOut/Layout/?companyId=${b}&areaId=${v}&type=create-template`},children:"Create new Template"})," ",o.jsx("br",{})]}),o.jsx("br",{}),o.jsx("button",{className:"template-dialog-close",onClick:V,children:"Close"})]}),B.map(r=>o.jsx(pe,{section:r,visible:!0,cellSize:N},r.cellId.toId())),J.map(r=>o.jsx(Ce,{cellSize:y?5:10,isViewingDesign:!0,removeItem:()=>{},visible:j(r,S),item:r,canPlaceItem:()=>!1,placeItem:()=>{},deleteItemRotate:()=>{},highlightCells:()=>{},unHighlightCells:()=>{},deleteItem:()=>{},isSelected:!1,onSelect:b=>{},isUnselecting:!1,onDeselect:()=>{}},r.id))]})}function il({dialogRef:a,closeDialog:V,addInventoryItem:I}){const[G,P]=g.useState(""),[B,Z]=g.useState(1),[H,F]=g.useState(1),[N,J]=g.useState(1);return o.jsx("dialog",{ref:a,className:"custom-item-dialog",children:o.jsxs("div",{className:"custom-item-dialog-div",children:[o.jsx("h2",{children:"Add Custom Item"}),o.jsxs("div",{className:"custom-item-row",children:[o.jsx("label",{htmlFor:"item-name",children:"Name:"}),o.jsx("input",{type:"text",id:"item-name",name:"item-name",onChange:w=>P(w.target.value??""),value:G})]}),o.jsxs("div",{className:"custom-item-row",children:[o.jsx("label",{htmlFor:"item-icon",children:"Count:"}),o.jsx("input",{type:"number",id:"item-count",name:"item-count",min:"1",value:B,onChange:w=>Z(parseInt(w.target.value)??1)})]}),o.jsxs("div",{className:"custom-item-row custom-item-size",children:[o.jsx("label",{htmlFor:"item-width",children:"Size (in feet):"}),o.jsx("input",{type:"number",id:"item-width",name:"item-width",min:"1",value:H,onChange:w=>F(parseFloat(w.target.value)??1)}),o.jsx("span",{children:" x "}),o.jsx("input",{type:"number",id:"item-height",name:"item-height",min:"1",value:N,onChange:w=>J(parseFloat(w.target.value)??1)})]}),o.jsx("br",{}),o.jsx("button",{className:"custom-item-dialog-add",onClick:()=>{if(G.trim()===""){alert("Item name cannot be empty");return}const w=new re({quantity:B,item:new k({id:G+(Math.random()*1e4).toString(),name:G,icon:`custom-${G}`,cellsLong:Math.ceil(H),cellsTall:Math.ceil(N),moveable:!0,starterItem:!1,displayItem:!0})});I(w),P(""),Z(1),F(1),J(1),V()},children:"Add Item"}),o.jsx("br",{}),o.jsx("br",{}),o.jsx("button",{className:"custom-item-dialog-close",onClick:V,children:"Close"})]})})}$e.createRoot(document.getElementById("root")).render(o.jsx(cl,{}));function cl(){const[a,V]=g.useState(/Mobi|Android/i.test(navigator.userAgent)),[I,G]=g.useState(0),[P,B]=g.useState(0),[Z,H]=g.useState([]),[F,N]=g.useState([]),[J,w]=g.useState(0),[y,K]=g.useState(null),[S,L]=g.useState([]),x=/Mobi|Android/i.test(navigator.userAgent)?5:10,[Y,j]=g.useState([]),r=g.useRef(null),[b,v]=g.useState(!1),[R,U]=g.useState([]),[h,A]=g.useState([]),[M,q]=g.useState([]),[f,D]=g.useState(!1),_=g.useRef(null),[ae,ye]=g.useState([]),[$,ie]=g.useState([]),[O,de]=g.useState(null),[ce,we]=g.useState(!1),[te,Re]=g.useState(!1),[ne,ke]=g.useState(!1),[De,Oe]=g.useState(!1),[Le,Pe]=g.useState(""),[se,Te]=g.useState(""),[Ie,Ge]=g.useState(""),[fe,Me]=g.useState(""),[We,Ze]=g.useState(""),[he,oe]=g.useState(!0),[be,He]=g.useState(null),xe=g.useRef(null);function me(e,t){for(const s of t)if(e.x>=s.cellId.x&&e.x<s.cellId.x+s.cellsLong&&e.y>=s.cellId.y&&e.y<s.cellId.y+s.cellsTall)return s;return null}function Fe(e){U([...e.map(n=>new Q({name:n.name,cellId:new T({x:n.cellId.x/2,y:n.cellId.y/2}),cellsLong:n.cellsLong/2,cellsTall:n.cellsTall/2,startingItems:[]}))]);let t=I,s=P;if(a){let n=0;const m=[],c=[];for(const l of e){const i=[],p={width:l.cellsLong*x,height:l.cellsTall*x,sectionName:l.name};p.height>n&&(n=p.height),ye(z=>[...z,p]),l.cellId.x=0,l.cellId.y=0,[...Array(p.height/x).keys()].map(z=>{const E=[];[...Array(p.width/x).keys()].map(C=>{E.push({id:new T({x:C,y:z}),hasItem:!1,itemId:"",mouseOver:!1,canPlaceItem:!1,mouseOverLocation:"",inSection:!0,size:x})}),i.push(E)}),m.push({sectionName:l.name,cells:[...i]}),c.push(l)}ie(m),A(c),w(n),de(e[0]?e[0].name:null),setTimeout(()=>{oe(!1)},500)}else{const n=[];for(const m of e)console.log("Generating cells for section",m.name,"at",m.cellId,"with size",m.cellsLong,"x",m.cellsTall),console.log("Needed section Width:",(m.cellsLong+m.cellId.x)*x,"Current width:",t),(m.cellsLong+m.cellId.x)*x>t&&(console.log("Added section Width:",m.cellsLong*x+m.cellId.x),t+=(m.cellsLong+m.cellId.x)*x-t),console.log("Needed section Height:",(m.cellsTall+m.cellId.y)*x,"Current height:",s),(m.cellsTall+m.cellId.y)*x>s&&(console.log("Added section Height:",m.cellsTall*x+m.cellId.y),s+=(m.cellsTall+m.cellId.y)*x-s);G(t),B(s),[...Array(s/x).keys()].map(m=>{const c=[];[...Array(t/x).keys()].map(l=>{c.push({id:new T({x:l,y:m}),hasItem:!1,itemId:"",mouseOver:!1,canPlaceItem:!1,mouseOverLocation:"",inSection:me(new T({x:l,y:m}),e)!=null,size:x})}),n.push(c)}),H([...n]),setTimeout(()=>{const m=[],c=[...e];for(const l of c)l.cellElement=document.querySelector(`.App #${l.cellId.toId()}.cell:not(.cell-border)`),m.push(...l.startingItems.map(i=>new ee({cell:new T({x:l.cellId.x+i.cell.x,y:l.cellId.y+i.cell.y}),item:new k({id:i.item.id,name:i.item.name,cellsLong:i.item.cellsLong,cellsTall:i.item.cellsTall,icon:i.item.icon,initialElement:document.querySelector(`.App #${i.cell.toId()}.cell:not(.cell-border)`),starterItem:!0,moveable:i.item.moveable,rotation:i.item.rotation||0})})));A([...c]);for(const l of m){const i=E=>{const C=E%2===1;return{cellsLong:C?l.item.cellsTall:l.item.cellsLong,cellsTall:C?l.item.cellsLong:l.item.cellsTall}},p=l.item.rotation||0,z=i(p);for(let E=0;E<z.cellsTall;E++)for(let C=0;C<z.cellsLong;C++)n[l.cell.y+E][l.cell.x+C].hasItem=!0,n[l.cell.y+E][l.cell.x+C].itemId=l.item.id;l.item.initialElement=document.querySelector(`.App #${l.cell.toId()}.cell:not(.cell-border)`),N(E=>[...E,l.item])}H([...n]),setTimeout(()=>{oe(!1)},500)},100)}}async function Ue(){const e=new URLSearchParams(window.location.search),t=e.get("companyId"),s=e.get("areaId"),n=e.get("areaId")||"",m=e.get("companyId")||"",c=e.get("templateId")||"",l=await _e(m,n),i=e.get("type")||"";if(i==="create-template")we(!0);else if(i==="edit-template"){Re(!0);const d=l.templates.find(u=>u.id===c);d&&(He(d),Te(d.name))}else if(i==="view-design"){ke(!0);const d=e.get("designName")||"";Pe(d);const u=e.get("designId")||"";Ze(u)}else i==="view-area"&&Oe(!0);t&&Ge(t),s&&Me(s),j(l.inventoryItems.map(d=>new re({item:new k({id:d.item.id,name:d.item.name,cellsLong:d.item.cellsLong,cellsTall:d.item.cellsTall,icon:d.item.icon,initialElement:d.item.initialElement,moveable:d.item.moveable,starterItem:d.item.starterItem,displayItem:!0}),quantity:d.quantity})));const p=[],z=[];for(const d of l.templates){const u=[],Ne=[];for(const X of d.sections)u.push(new Q({name:X.name,cellId:new T({x:X.cellId.x/(a?20:10),y:X.cellId.y/(a?20:10)}),cellsLong:X.cellsLong/(a?20:10),cellsTall:X.cellsTall/(a?20:10),startingItems:X.startingItems.map(W=>new ee({cell:new T({x:W.cell.x/(a?2:1),y:W.cell.y/(a?2:1)}),item:new k({id:W.item.id,name:W.item.name,cellsLong:W.item.cellsLong/2,cellsTall:W.item.cellsTall/2,icon:W.item.icon,starterItem:!0,moveable:W.item.moveable,rotation:W.item.rotation||0})}))})),Ne.push(new Q({name:X.name,cellId:new T({x:X.cellId.x,y:X.cellId.y}),cellsLong:X.cellsLong,cellsTall:X.cellsTall,startingItems:X.startingItems.map(W=>new ee({cell:new T({x:W.cell.x,y:W.cell.y}),item:new k({id:W.item.id,name:W.item.name,cellsLong:W.item.cellsLong,cellsTall:W.item.cellsTall,icon:W.item.icon,starterItem:!0,moveable:W.item.moveable,rotation:W.item.rotation||0})}))}));p.push(new le({name:d.name,sections:u,id:d.id})),z.push(new le({name:d.name,sections:Ne,id:d.id}))}q([...p]);const E=[],C=c===""?void 0:z.find(d=>d.id===c);console.log("TEMPLATE",C,"AREA",l),C!==void 0?(U([...C.sections]),A([...C.sections.map(d=>new Q({name:d.name,cellId:new T({x:d.cellId.x/10,y:d.cellId.y/10}),cellsLong:d.cellsLong/10,cellsTall:d.cellsTall/10,startingItems:d.startingItems,items:d.startingItems.map(u=>new k({id:u.item.id,name:u.item.name,sectionCell:u.cell,cellsLong:u.item.cellsLong,cellsTall:u.item.cellsTall,icon:u.item.icon,moveable:u.item.moveable,starterItem:u.item.starterItem,rotation:u.item.rotation}))}))]),E.push(...C.sections.map(d=>new Q({name:d.name,cellId:new T({x:d.cellId.x/10,y:d.cellId.y/10}),cellsLong:d.cellsLong/10,cellsTall:d.cellsTall/10,startingItems:d.startingItems,items:d.startingItems.map(u=>new k({id:u.item.id,name:u.item.name,cellsLong:u.item.cellsLong,cellsTall:u.item.cellsTall,icon:u.item.icon,moveable:u.item.moveable,starterItem:u.item.starterItem,rotation:u.item.rotation,sectionCell:u.cell}))})))):(U([...l.sections]),A([...l.sections.map(d=>new Q({name:d.name,cellId:new T({x:d.cellId.x/10,y:d.cellId.y/10}),cellsLong:d.cellsLong/10,cellsTall:d.cellsTall/10,startingItems:d.startingItems,items:d.startingItems.map(u=>new k({id:u.item.id,name:u.item.name,sectionCell:u.cell,cellsLong:u.item.cellsLong,cellsTall:u.item.cellsTall,icon:u.item.icon,moveable:u.item.moveable,starterItem:u.item.starterItem,rotation:u.item.rotation}))}))]),E.push(...l.sections.map(d=>new Q({name:d.name,cellId:new T({x:d.cellId.x/10,y:d.cellId.y/10}),cellsLong:d.cellsLong/10,cellsTall:d.cellsTall/10,startingItems:d.startingItems,items:d.startingItems.map(u=>new k({id:u.item.id,name:u.item.name,sectionCell:u.cell,cellsLong:u.item.cellsLong,cellsTall:u.item.cellsTall,icon:u.item.icon,moveable:u.item.moveable,starterItem:u.item.starterItem,rotation:u.item.rotation}))})))),console.log("SECTIONS TO GENERATE",E),Fe(E)}g.useEffect(()=>{Ue()},[]);function Ye(e,t,s){if(!a||e==null)return;const n=[...s],m=[],c=s.find(l=>l.name==e);console.log("NEW SECTION",c),console.log("Adding section",c.name,c.cellId),console.log("MOBILE CELLS",t),c.cellElement=document.querySelector(`.App #${c.name.split(" ").join("-")} #${c.name.split(" ").join("")}${c.cellId.toId()}.cell:not(.cell-border)`),console.log("Section element found",c.cellElement);for(const l of c.startingItems){console.log("Placing starting item",l.item.name,l.cell);const i=E=>{const C=E%2===1;return{cellsLong:C?l.item.cellsTall:l.item.cellsLong,cellsTall:C?l.item.cellsLong:l.item.cellsTall}},p=l.item.rotation||0,z=i(p);for(let E=0;E<z.cellsTall;E++)for(let C=0;C<z.cellsLong;C++){const d=t.find(u=>u.sectionName===c.name);d.cells[l.cell.y+E][l.cell.x+C].hasItem=!0,d.cells[l.cell.y+E][l.cell.x+C].itemId=l.item.id}l.item.initialElement=document.querySelector(`.App #${c.name.split(" ").join("-")} #${c.name.split(" ").join("")}${l.cell.toId()}.cell:not(.cell-border)`),console.log("Adding item to items",l.item.initialElement),m.push(new k({id:l.item.id,name:l.item.name,cellsLong:l.item.cellsLong,cellsTall:l.item.cellsTall,icon:l.item.icon,initialElement:l.item.initialElement,starterItem:!0,moveable:l.item.moveable,rotation:l.item.rotation}))}console.log("Setting sections",n),A([...n]),console.log("ITEMS",m),N(l=>[...l.filter(p=>!m.some(z=>z.id===p.id)),...m.map(p=>new k({id:p.id,name:p.name,cellsLong:p.cellsLong,cellsTall:p.cellsTall,icon:p.icon,initialElement:p.initialElement,starterItem:!0,moveable:p.moveable,rotation:p.rotation}))])}function je(e){let t=[];return e.map(s=>t=[...t,...s]),t}function ve(e,t){console.log(e);const s=a?$.find(l=>l.sectionName===O).cells:Z,n=s[e.y].length,m=s.length;if(console.log(n,m),e.x+t.cellsLong>n||e.y+t.cellsTall>m)return!1;const c=me(e,h);if(!c&&!a)return console.log("Item is out of bounds of any section"),!1;for(let l=0;l<t.cellsTall;l++)for(let i=0;i<t.cellsLong;i++){if(!a){const p=me(new T({x:e.x+i,y:e.y+l}),h);if(!p)return console.log("Item is out of bounds of any section"),!1;if(p.name!=c.name)return console.log("Item is crossing section boundaries"),!1}if(s[e.y+l][e.x+i].hasItem&&s[e.y+l][e.x+i].itemId!=t.id)return console.log("Something is already here"),!1}return!0}function ze(e,t,s){const n=Array.from(a?$.find(l=>l.sectionName===O).cells:Z);if(s!=null){console.log("Removing item");const l=a?h.find(i=>i.name===O):me(s,h);l.items=l.items.filter(i=>i.id!=t.id);for(let i=0;i<t.cellsTall;i++)for(let p=0;p<t.cellsLong;p++)n[s.y+i][s.x+p].hasItem=!1,n[s.y+i][s.x+p].itemId=""}const m=a?h.find(l=>l.name===O):me(e,h),c=new T({x:e.x-m.cellId.x,y:e.y-m.cellId.y});t.sectionCell=c,m.items.push(t);for(let l=0;l<t.cellsTall;l++)for(let i=0;i<t.cellsLong;i++)n[e.y+l][e.x+i].hasItem=!0,n[e.y+l][e.x+i].itemId=t.id;if(console.log(n),a){const l=$.find(i=>i.sectionName===O);l&&(l.cells=n.map(i=>i.map(p=>({...p}))),ie([...$]))}else H(n);if(console.log("Removing item from inventory",t.name),!t.hasMoved){const l=Y.findIndex(i=>i.item.name==t.name&&!i.item.hasMoved);if(l!==-1){const i=[...Y];i[l].quantity-=1,i[l].quantity<=0&&i.splice(l,1),j(i)}else j(Y)}N(l=>(console.log("Placing item",t.id),console.log("Updating item",t.id),l.find(i=>i.id==t.id).hasMoved||(l.find(i=>i.id==t.id).hasMoved=!0),l))}function Be(e){F.find(t=>t.name==e.name&&!t.hasMoved&&!t.starterItem)||N(t=>[...t,e])}function Se(e){console.log("Removing item",e.id),N(t=>t.filter(s=>s.id!=e.id))}function Ve(e,t){const s=Array.from(Z),n=l=>{const i=l%2===1;return{cellsWide:i?e.cellsTall:e.cellsLong,cellsTall:i?e.cellsLong:e.cellsTall}},m=e.rotation||0,c=n(m);for(let l=0;l<c.cellsTall;l++)for(let i=0;i<c.cellsWide;i++)s[t.y+l][t.x+i].hasItem=!1,s[t.y+l][t.x+i].itemId="";H(s),console.log("DELETING ITEM",e.id),N(l=>(console.log(),l.filter(i=>i.id!=e.id))),j(l=>{const i=l.findIndex(p=>p.item.name==e.name&&!p.item.hasMoved);if(i!==-1){const p=[...l];return p[i].quantity+=1,p}else return[...l,new re({item:new k({id:e.id,name:e.name,cellsLong:c.cellsWide,cellsTall:c.cellsTall,icon:e.icon}),quantity:1})]})}function Je(e,t){const s=Array.from(a?$.find(l=>l.sectionName===O).cells:Z);console.log("DELETING ITEM ROTATE",e.id,e.rotation);const n=l=>{const i=l%2===1;return{cellsWide:i?e.cellsTall:e.cellsLong,cellsTall:i?e.cellsLong:e.cellsTall}},m=e.rotation||0,c=n(m);for(let l=0;l<c.cellsTall;l++)for(let i=0;i<c.cellsWide;i++)console.log("Deleting cell",t.y+l,t.x+i),s[t.y+l][t.x+i].hasItem=!1,s[t.y+l][t.x+i].itemId="";H([...s]),console.log("DELETING ITEM",e.id)}function Xe(e,t){const s=a?$.find(c=>c.sectionName===O).cells:Z,n=Array.from(s);if(s[e.y]==null){Ae();return}const m=ve(e,t);n.forEach(c=>c.forEach(l=>{l.mouseOver=!1,l.canPlaceItem=!1,l.mouseOverLocation=""}));for(let c=0;c<t.cellsTall;c++)for(let l=0;l<t.cellsLong;l++)e.y+c<n.length&&e.x+l<n[e.y+c].length&&(t.cellsLong===1&&t.cellsTall===1?n[e.y+c][e.x+l].mouseOverLocation="single":t.cellsTall===1?l===0?n[e.y+c][e.x+l].mouseOverLocation="leftFull":l===t.cellsLong-1?n[e.y+c][e.x+l].mouseOverLocation="rightFull":n[e.y+c][e.x+l].mouseOverLocation="middleFull":t.cellsLong===1?c===0?n[e.y+c][e.x+l].mouseOverLocation="topFull":c===t.cellsTall-1?n[e.y+c][e.x+l].mouseOverLocation="bottomFull":n[e.y+c][e.x+l].mouseOverLocation="middleVFull":c===0&&l===0?n[e.y+c][e.x+l].mouseOverLocation="topLeftCorner":c===0&&l===t.cellsLong-1?n[e.y+c][e.x+l].mouseOverLocation="topRightCorner":c===t.cellsTall-1&&l===0?n[e.y+c][e.x+l].mouseOverLocation="bottomLeftCorner":c===t.cellsTall-1&&l===t.cellsLong-1?n[e.y+c][e.x+l].mouseOverLocation="bottomRightCorner":c===0?n[e.y+c][e.x+l].mouseOverLocation="top":c===t.cellsTall-1?n[e.y+c][e.x+l].mouseOverLocation="bottom":l===0?n[e.y+c][e.x+l].mouseOverLocation="left":l===t.cellsLong-1?n[e.y+c][e.x+l].mouseOverLocation="right":n[e.y+c][e.x+l].mouseOverLocation="middle",n[e.y+c][e.x+l].mouseOver=!0,n[e.y+c][e.x+l].canPlaceItem=m);if(a){const c=$.find(l=>l.sectionName===O);c&&(c.cells=n.map(l=>l.map(i=>({...i}))),ie([...$])),ie(l=>l.map(i=>i.sectionName===O?{...i,cells:n}:i))}else H(n)}function Ae(){const e=Array.from(a?$.find(t=>t.sectionName===O).cells:Z);e.forEach(t=>t.forEach(s=>{s.mouseOver=!1,s.canPlaceItem=!1,s.mouseOverLocation=""})),H(e)}g.useEffect(()=>{Ye(O,$,h)},[O]),g.useEffect(()=>{const e=()=>{const t=F.find(s=>s.id===y);console.log("Unselecting item",y),K(null),t&&(L(s=>[...s,t.id]),console.log("Unselecting item",t.id),setTimeout(()=>{L(s=>s.filter(n=>n!==t.id))},300))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[y,F]);function Qe(e){K(null),L(t=>[...t,e]),console.log("Unselecting item",e),setTimeout(()=>{L(t=>t.filter(s=>s!==e))},300)}function Ke(e){const t=F.find(s=>s.id===y);console.log("Unselecting item",y),K(e),t&&(L(s=>[...s,t.id]),console.log("Unselecting item",t.id),setTimeout(()=>{L(s=>s.filter(n=>n!==t.id))},300))}function qe(e){j(t=>[...t,e])}return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"App",children:[o.jsx("h1",{className:"title",children:"LayItOut"}),o.jsx("br",{}),(ce||te)&&o.jsxs("div",{className:"template-name-row",children:[o.jsx("label",{htmlFor:"template-name",children:"Template Name:"}),o.jsx("input",{type:"text",id:"template-name",name:"template-name",onChange:e=>Te(e.target.value),value:se})]}),ne&&o.jsx("div",{className:"design-name-row",children:o.jsxs("label",{htmlFor:"design-name",children:["Design Name: ",Le]})}),(ce||te)&&o.jsxs("div",{className:"template-creation",children:[o.jsxs("button",{className:"action-btn",onClick:()=>{if(se.trim()==""){alert("Please enter a template name");return}if(M.some(e=>e.name===se&&(te?e.id!==be.id:!0))){alert("Template with this name already exists");return}if(te){const e=M.map(t=>t.id===be.id?(console.log("SECTION",h),new le({name:se,sections:h.map(s=>new Q({name:s.name,cellId:new T({x:t.sections.find(n=>n.name==s.name).cellId.x*(a?20:10),y:t.sections.find(n=>n.name==s.name).cellId.y*(a?20:10)}),cellsLong:s.cellsLong*10,cellsTall:s.cellsTall*10,startingItems:s.items.map(n=>new ee({cell:new T({x:n.sectionCell.x,y:n.sectionCell.y}),item:new k({id:n.id,name:n.name,cellsLong:n.cellsLong,cellsTall:n.cellsTall,icon:n.icon,starterItem:!0,moveable:n.moveable,rotation:n.rotation})}))})),id:t.id})):new le({name:t.name,sections:t.sections.map(s=>new Q({name:s.name,cellId:new T({x:s.cellId.x*(a?20:10),y:s.cellId.y*(a?20:10)}),cellsLong:s.cellsLong*(a?20:10),cellsTall:s.cellsTall*(a?20:10),startingItems:s.startingItems.map(n=>new ee({cell:new T({x:n.cell.x*(a?2:1),y:n.cell.y*(a?2:1)}),item:new k({id:n.item.id,name:n.item.name,cellsLong:n.item.cellsLong*2,cellsTall:n.item.cellsTall*2,icon:n.item.icon,starterItem:n.item.starterItem,moveable:n.item.moveable,rotation:n.item.rotation})}))})),id:t.id}));oe(!0),Ee(Ie,fe,e).then(()=>{console.log("Template updated successfully"),oe(!1);const t=new URLSearchParams(window.location.search),s=t.get("companyId"),n=t.get("areaId");window.location.href=`/LayItOut/Layout/?companyId=${s}&areaId=${n}&type=view-area`})}else{const e=new le({name:se,sections:h.map(s=>new Q({name:s.name,cellId:new T({x:R.find(n=>n.name==s.name).cellId.x*20,y:R.find(n=>n.name==s.name).cellId.y*20}),cellsLong:s.cellsLong*10,cellsTall:s.cellsTall*10,startingItems:s.items.map(n=>new ee({cell:new T({x:n.sectionCell.x,y:n.sectionCell.y}),item:new k({id:n.id,name:n.name,cellsLong:n.cellsLong,cellsTall:n.cellsTall,icon:n.icon,starterItem:!0,moveable:n.moveable,rotation:n.rotation})}))})),id:se+(Math.random()*1e4).toString()}),t=[...M.map(s=>new le({name:s.name,sections:s.sections.map(n=>new Q({name:n.name,cellId:new T({x:n.cellId.x*(a?20:10),y:n.cellId.y*(a?20:10)}),cellsLong:n.cellsLong*(a?20:10),cellsTall:n.cellsTall*(a?20:10),startingItems:n.startingItems.map(m=>new ee({cell:new T({x:m.cell.x*(a?2:1),y:m.cell.y*(a?2:1)}),item:new k({id:m.item.id,name:m.item.name,cellsLong:m.item.cellsLong*2,cellsTall:m.item.cellsTall*2,icon:m.item.icon,starterItem:m.item.starterItem,moveable:m.item.moveable,rotation:m.item.rotation})}))})),id:s.id})),e];oe(!0),Ee(Ie,fe,t).then(()=>{console.log("Template updated successfully"),oe(!1);const s=new URLSearchParams(window.location.search),n=s.get("companyId"),m=s.get("areaId");window.location.href=`/LayItOut/Layout/?companyId=${n}&areaId=${m}&type=view-area`})}},children:[ce?"Create":"Save"," Template"]}),o.jsx("button",{className:"action-btn",onClick:()=>{we(!1),q([]),U([]),A([]),ie([]),ye([]),de(null)},children:"Cancel"})]}),he&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"loader-backdrop"}),o.jsx("div",{className:"loader"})]})," ",o.jsxs("div",{className:"layout",children:[!ne&&o.jsx(tl,{isViewingDesign:ne,isEditingTemplate:te,isCreatingTemplate:ce,maxHeight:a?200:P,showAddCustomItem:()=>{xe.current?.showModal()},addDraggingItem:Be,removeItem:Se,inventoryItems:Y.map(e=>new re({item:new k({id:e.item.id,name:e.item.name,cellsLong:e.item.cellsLong,cellsTall:e.item.cellsTall,icon:e.item.icon,displayItem:!0}),quantity:e.quantity}))}),a?o.jsxs("div",{className:"mobile-areas",style:{height:J+"px"},children:[o.jsx("img",{src:ue,onClick:()=>{const e=h.findIndex(s=>s.name==O);if(e===-1)return;const t=(e-1+h.length)%h.length;de(h[t].name),console.log("Changing viewing section to",h[t].name)},className:"back-mobile-areas"}),ae.map((e,t)=>o.jsx(ge,{width:e.width,height:e.height,cells:je($.find(s=>s.sectionName==e.sectionName).cells),id:e.sectionName,visibile:O==null?!0:e.sectionName==O,section:e.sectionName},t)),o.jsx("img",{src:ue,onClick:()=>{const e=h.findIndex(s=>s.name==O);if(e===-1)return;const t=(e+1)%h.length;de(h[t].name),console.log("Changing viewing section to",h[t].name)},className:"forward-mobile-areas"})]}):o.jsx(ge,{width:I,height:P,cells:je(Z)})]}),ne&&o.jsx("div",{className:"design-view",children:o.jsx("button",{className:"action-btn",onClick:()=>{window.location.href=`/LayItOut/Print/?companyId=${Ie}&areaId=${fe}&designName=${Le}&designId=${We}`},children:"Print"})})]}),o.jsxs("div",{id:"capture",children:[h.map(e=>o.jsx(pe,{section:e,visible:O==null?!0:e.name==O,cellSize:x},e.cellId.toId())),F.map(e=>o.jsx(Ce,{cellSize:x,isViewingDesign:ne,removeItem:Se,visible:a?!e.hasMoved&&!e.starterItem?!0:O==null?!1:e.starterItem?h.find(t=>t.name==O)?.startingItems.some(t=>t.item.id===e.id):h.find(t=>t.name==O)?.items.some(t=>t.id===e.id):!0,item:e,canPlaceItem:ve,placeItem:ze,deleteItemRotate:Je,highlightCells:Xe,unHighlightCells:Ae,deleteItem:Ve,isSelected:y===e.id,onSelect:Ke,isUnselecting:S.includes(e.id),onDeselect:()=>Qe(e.id)},e.id))]}),a&&!he&&o.jsx("div",{className:"layout-icon",onClick:()=>{r.current?.showModal(),v(!0),console.log("Showing layout dialog")},children:o.jsx("img",{src:sl,alt:""})}),!he&&!(ce||te||ne)&&o.jsx("div",{className:"template-icon",onClick:()=>{_.current?.showModal(),D(!0),console.log("Showing template dialog")},children:o.jsx("img",{src:ol,alt:""})}),o.jsx(al,{isViewingArea:De,dialogRef:_,isOpen:f,closeDialog:()=>{_.current?.close(),D(!1)},templates:M}),o.jsx(nl,{dialogRef:r,isOpen:b,closeDialog:()=>{r.current?.close(),v(!1)},layoutSections:R}),o.jsx(il,{dialogRef:xe,addInventoryItem:qe,closeDialog:()=>{xe.current?.close()}})]})}
