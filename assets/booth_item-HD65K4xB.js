import{j as n,r as l}from"./index-_mSZXrjJ.js";import{C as W,I as ue}from"./firestore-BIrJGVi9.js";function ve({id:t,mouseOver:g,canPlaceItem:e,hasItem:v,mouseOverLocation:S,inSection:F,section:d,size:C}){return n.jsx("div",{className:`cell ${g?"hovered":""} ${e?"legal":"illegal"} ${v?"hasItem":""} ${S} ${F?"":"outside"}`,id:`${d==null?"":d.split(" ").join("")}${t.toId()}`,style:{width:`${C}px`,height:`${C}px`},children:n.jsx("div",{className:"cell cell-border",id:`${d==null?"":d.split(" ").join("")}${t.toId()}`})})}function Le({width:t,height:g,cells:e,id:v,visibile:S,section:F}){return n.jsx("div",{className:`area ${S??!0?"":"invisible"}`,style:{width:`${t}px`,height:`${g}px`},id:v!=null?v.split(" ").join("-"):"",children:e.map(d=>n.jsx(ve,{size:d.size,id:d.id,canPlaceItem:d.canPlaceItem,mouseOver:d.mouseOver,hasItem:d.hasItem,itemId:d.itemId,mouseOverLocation:d.mouseOverLocation,inSection:d.inSection,section:F}))})}const q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAADwAAAADW5XGhAAABRUlEQVQoFY2Tz0oDMRDGv4lgPXkUPAiCvfUBbD3VLoJoBUuPPoI+jlffQIqiUC9tb/45+QIF7bXFB9jDZjrZNptN090a2M0km++XyZdZ4rPGH4AdaN2mwddI4tLGtdo29nd7ILqExq2S1w1AW1DqlaPj0zK1Jwb3MZk+kBFw1DiHoieJkqJMAvHPrEPjcZwCNkGKxEaXAYogZeIAEELQlS3uUsPMmZdpm3W2eRnYSecJKou59WLzTVmR109mIzC+3Zy+N4a5sYsCAFerFRzuyT2jLpBPWRqD1aPUS+RkLvIAOfGFXGkfv9MmNF+LB0pgL9w6aTnpIso8CMQ5wzJPmDU0tWn4PrSgFLDpqsziDGKKLaErC6H/iO1uHmT575CY05N66qRnzqVtRau9D6GmMedInud1RbIqNmMafLwh0bIhxSB9MAfmu9CGVRsdYgAAAABJRU5ErkJggg==",ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGaADAAQAAAABAAAAGQAAAABY85deAAABrUlEQVRIDe1VPUsDQRB9ezk0GO0FwVhFBQtDWot09oqFCGopgp1ILoWNEEHRRmy0EmwEK7XxB1gIfjQWdmlFLEQRDcaM7y4f3O4lmJw2QhYuu29m3szeu2ECmGtZYsjKAVZk0HSFxVaAqNBL2ywiuIYjcwF/CIMqc0QhgwkoTBEnuCd9udaQU6s+3PKRbyIWsjhi4n2y83wOfVnyKOLEh0MdLb7BIgRpfCKFdeWghGMvk7DwK0axoa5CZdZIWbml9hnDNqLhXwKb/CFKdanlyak7D89LFB0INocWTLCHD0CVTHMVu0Wi1P29avD2jEyz8DYft9N+Xg4KUHJGeWewowomweb3uOddn2qOtNheEyg80rZJ/1fN1/iQoGsS3Tjn7jaQtmx+7GHNkkIfi8Ro22Xrbmm+RmBJOtHjSsb2r7OCeltwJXRXsbw18ftQi61yNVKwiOb+G9Au0pKObbn+g1w2XrxrlhBv+rpx9Fdiy1yDWPlnNKyO3HC0JDm33uhpOF19rC7GRxg/xjF14bN7x7pjgJ5xpl7g4BwgMWKSAljwzCKn9QoEYtuGnxT4Bng+WDuZ4k7PAAAAAElFTkSuQmCC";function Te({isCreatingArea:t,isCreatingTemplate:g,item:e,canPlaceItem:v,placeItem:S,deleteItem:F,deleteItemRotate:d,isSelected:C,onSelect:f,onDeselect:K,isUnselecting:Q,highlightCells:X,unHighlightCells:P,visible:J,removeItem:m,isViewingDesign:y,cellSize:a,isPlacingItem:p}){const[h,L]=l.useState(0),[I,T]=l.useState(0),O=l.useRef(null),[Y,G]=l.useState(0),[k,$]=l.useState(0),[B,x]=l.useState(!1),[w,ie]=l.useState(0),[E,V]=l.useState(null),[z,ce]=l.useState(!0),[s,b]=l.useState(12),H=l.useRef(null),[D,re]=l.useState(!0),[xe,ae]=l.useState(!1);l.useEffect(()=>(window.addEventListener("mousedown",()=>ae(!0)),window.addEventListener("mouseup",()=>ae(!1)),()=>{window.removeEventListener("mousedown",()=>ae(!0)),window.removeEventListener("mouseup",()=>ae(!1))}),[]);const _=o=>{const A=o%2===1;return{width:A?e.cellsTall*a:e.cellsLong*a,height:A?e.cellsLong*a:e.cellsTall*a,cellsWide:A?e.cellsTall:e.cellsLong,cellsTall:A?e.cellsLong:e.cellsTall}},ee=o=>{const A=e.cellsLong*a,c=e.cellsTall*a;switch(o%4){case 0:return{x:0,y:0};case 1:return{x:(c-A)/2,y:(A-c)/2};case 2:return{x:0,y:0};case 3:return{x:(c-A)/2,y:(A-c)/2};default:return{x:0,y:0}}},Ae=()=>{const o=w+1,A=_(o),c=ue.fromDoc(e.toDoc());c.cellsLong=A.cellsWide,c.cellsTall=A.cellsTall,c.initialElement=e.initialElement,c.rotation=o,c.hasMoved=e.hasMoved;let i=E;if(!e.hasMoved&&e.rotation!=0||i&&v(W.fromString(i.id),c)){i==null&&(i=e.initialElement),console.log("ROTATE ITEM",e.id,"to rotation:",o,"at cell:",i?.id),ie(o),d(e,W.fromString(i.id)),e.rotation=o;const N=ee(o),r=i.offsetLeft,M=i.offsetTop;L(r+N.x),T(M+N.y),G(r+N.x),$(M+N.y)}};function Ee(o){const A=O.current,c=window.getComputedStyle(A),i=document.createElement("span");i.style.font=c.font,i.style.fontSize=o+"px",i.style.fontFamily=c.fontFamily,i.style.fontWeight=c.fontWeight,i.style.position="absolute",i.style.visibility="hidden",i.style.whiteSpace="nowrap",i.textContent=A.textContent,document.body.appendChild(i);const N=i.offsetWidth;return document.body.removeChild(i),N}function fe(o){if(O.current){const A=O.current;return Ee(o-1)>A.offsetWidth&&o-1>8?fe(o-1):o-1}return o}l.useEffect(()=>{setTimeout(()=>{O.current&&b(fe(s)),e.isDisplayItem&&!e.hasMoved&&(console.log("Starting item as dragging item"),x(!0))},100)},[]),l.useEffect(()=>{e.initialElement!=null&&(console.log("Item initial element:",e.rotation),e.rotation&&setTimeout(()=>{console.log("Rotating item to initial rotation:",e.rotation);for(let o=0;o<e.rotation;o++)console.log("Rotating item",o+1,"times"),ie(A=>{const c=(A+1)%4,i=ee(c),N=e.initialElement.offsetLeft,r=e.initialElement.offsetTop;return L(N+i.x),T(r+i.y),G(N+i.x),$(r+i.y),c})},100),e.initialElement&&(e.initialElement.classList.contains("cell")&&(console.log("Setting cell to initial element:",e.initialElement.children[0]),V(e.initialElement.children[0])),L(e.initialElement.offsetLeft),T(e.initialElement.offsetTop),G(e.initialElement.offsetLeft),$(e.initialElement.offsetTop)))},[e]);const de=()=>{if(B)return;if(E==null){L(e.initialElement.offsetLeft),G(e.initialElement.offsetLeft),T(e.initialElement.offsetTop),$(e.initialElement.offsetTop);return}const o=E.offsetTop,A=E.offsetLeft,c=ee(w);L(A+c.x),T(o+c.y),G(A+c.x),$(o+c.y)};l.useEffect(()=>(window.addEventListener("resize",de),()=>{window.removeEventListener("resize",de)}),[E,w,B]);const te=o=>{o.preventDefault()};l.useEffect(()=>{if(console.log("IS Dragging: ",B),B){G(h),$(I),document.body.addEventListener("touchmove",te,{passive:!1});const o=document.getElementById(e.id)?.getBoundingClientRect(),A=o?o.left-h:0,c=o?o.top-I:0;C&&K();const i=(r,M,u)=>{const U=_(w),R=ue.fromDoc(e.toDoc());R.cellsLong=U.cellsWide,R.cellsTall=U.cellsTall,R.initialElement=e.initialElement,R.rotation=w,R.hasMoved=e.hasMoved,R.id=e.id;let j=u;if(!j||!j.classList?.contains("cell")){const Z=document.elementFromPoint(r,M);Z?.classList?.contains("cell")&&(j=Z)}j?.classList?.contains("cell")?X(W.fromString(j.id),R):j?.classList?.contains("section-modifier")?(console.log("Target element is a section modifier, highlighting cells",j),X(W.fromString(j.dataset.cell),R)):(console.log("Target element is not a cell or section modifier, not highlighting cells",j),P()),L(r-A),T(M-c+5),console.log("Is mouse down:",xe)},N=(r,M)=>{console.log("Drag ended"),P(),document.body.removeEventListener("touchmove",te);const u=document.elementFromPoint(r,M);if(E!==null&&u?.dataset.cell===E.id){console.log("Target element is the same cell, not placing item"),L(Y),T(k),x(!1);return}if(!u?.classList?.contains("cell")&&!u?.classList?.contains("section-modifier")){if(e.isDisplayItem&&!e.hasMoved){console.log("Removing item from toolbox"),m(e),x(!1);return}x(!1),L(Y),T(k)}else if(u?.classList?.contains("section-modifier")){if(console.log("Placing item on section modifier cell"),console.log("Target element:",u.dataset.cell),u.dataset.cell==""){if(console.warn("Section modifier cell data is null, cannot place item"),e.isDisplayItem&&!e.hasMoved){console.log("Removing item from toolbox"),m(e),x(!1);return}x(!1),L(Y),T(k);return}const U=_(w),R={...e,cellsLong:U.cellsWide,cellsTall:U.cellsTall};if(!v(W.fromString(u.dataset.cell),R)){if(e.isDisplayItem&&!e.hasMoved){console.log("Removing item from toolbox"),m(e);return}L(Y),T(k),x(!1);return}const j=u.offsetTop,Z=u.offsetLeft,oe=ee(w),le=Z+oe.x,se=j+oe.y;L(le),T(se),G(le),$(se),x(!1),S(W.fromString(u.dataset.cell),R,E!=null?W.fromString(E.id):null),console.log("Placed item at cell:",u),V(document.getElementById(u.dataset.cell))}else{const U=_(w),R={...e,cellsLong:U.cellsWide,cellsTall:U.cellsTall};if(!v(W.fromString(u.id),R)){if(e.isDisplayItem&&!e.hasMoved){console.log("Removing item from toolbox"),m(e);return}L(Y),T(k),x(!1);return}const j=u.offsetTop,Z=u.offsetLeft,oe=ee(w),le=Z+oe.x,se=j+oe.y;L(le),T(se),G(le),$(se),S(W.fromString(u.id),R,E!=null?W.fromString(E.id):null),console.log("Placed item at cell:",u),V(u),x(!1)}x(!1)};return document.onmousemove=r=>{r.preventDefault(),i(r.clientX,r.clientY,r.target)},document.onmouseup=r=>{console.log("Mouse up at:",r.clientX,r.clientY),N(r.clientX,r.clientY),document.onmousemove=null,document.onmouseup=null,document.ontouchmove=null,document.ontouchend=null},document.ontouchmove=r=>{r.preventDefault();const M=r.touches[0];i(M.clientX,M.clientY,r.target)},document.ontouchend=r=>{const M=r.changedTouches[0];N(M.clientX,M.clientY),document.removeEventListener("touchmove",te),document.onmousemove=null,document.onmouseup=null,document.ontouchmove=null,document.ontouchend=null},()=>{document.removeEventListener("touchmove",te)}}else document.onmousemove=null,document.onmouseup=null,document.ontouchmove=null,document.ontouchend=null,document.body.removeEventListener("touchmove",te)},[B,E,w]);const ne=_(w);return h==0||I==0||!D?null:n.jsxs(n.Fragment,{children:[n.jsx("div",{id:e.id,ref:H,className:`draggable-item ${p?"is-placing":""} ${e.isSectionModifier?"section-modifier":""} ${y?"viewing":""} ${e.isSectionModifier&&!e.moveable?"placed-modifier":""} ${e.isSectionModifier?e.sectionModifierType?.toString():""} ${B?"dragging":C?"selected":""} ${e.moveable?"":"not-moveable"} ${J?"":"invisible"}`,"data-cell":E?.id||"",style:{top:`${I}px`,left:`${h}px`,width:`${e.cellsLong*(e.isDisplayItem&&!B&&!e.hasMoved?10:a)-(C?4:0)-(e.sectionModifierType=="LeftWall"||e.sectionModifierType=="RightWall"||e.sectionModifierType==="LeftWindow"||e.sectionModifierType==="RightWindow",0)}px`,height:`${e.cellsTall*(e.isDisplayItem&&!B&&!e.hasMoved?10:a)-(C?4:0)-(e.sectionModifierType=="TopWall"||e.sectionModifierType=="BottomWall"||e.sectionModifierType==="TopWindow"||e.sectionModifierType==="BottomWindow",0)}px`,rotate:`${w*90}deg`,transformOrigin:"center center",fontSize:`${s}px`},onMouseDown:(e.moveable||t||g)&&!y?()=>x(!0):void 0,onTouchStart:(e.moveable||t||g)&&!y?o=>{o.preventDefault(),x(!0)}:void 0,onClick:o=>{console.log("Clicked on item:",e.id),x(!1),o.stopPropagation(),!(!e.moveable&&!t&&!g||y)&&(C?K():f(e.id))},children:e.isSectionModifier?e.sectionModifierType==="LeftDoor"||e.sectionModifierType==="RightDoor"?n.jsx("img",{src:e.icon,alt:"icon"}):null:e.icon.includes("custom-")?n.jsx("div",{className:e.isSectionItem?"custom-section":"custom-icon",children:n.jsx("div",{children:n.jsx("p",{ref:O,children:e.icon.split("custom-")[1]})})}):n.jsx("img",{src:e.icon,alt:"icon"})}),(C||Q)&&n.jsx(n.Fragment,{children:/Mobi|Android/i.test(navigator.userAgent)?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`draggable-item-options mobile-left ${Q?"exiting":""}`,style:{top:`${I+e.cellsTall*a/2-10}px`,left:`${h+e.cellsLong*a/2-ne.width/2-20}px`,width:"10px"},children:n.jsx("img",{src:ge,alt:"rotate",className:"rotate-icon"+(z?" can-rotate":" cannot-rotate"),onClick:o=>{o.stopPropagation(),Ae()}})}),n.jsx("div",{className:`draggable-item-options mobile-right ${Q?"exiting":""}`,style:{top:`${I+e.cellsTall*a/2-10}px`,left:`${h+e.cellsLong*a/2+ne.width/2+10}px`,width:"10px"},children:n.jsx("img",{src:q,alt:"delete",className:"delete-icon",onClick:o=>{o.stopPropagation(),F(e,W.fromString(E?.id||""))}})})]}):n.jsxs("div",{className:`draggable-item-options ${Q?"exiting":""}`,style:{top:`${I+e.cellsTall*a/2-ne.height/2-20}px`,left:`${h+e.cellsLong*a/2-ne.width/2}px`,width:`${ne.width}px`},children:[(!e.isSectionModifier||e.sectionModifierType==="LeftDoor"||e.sectionModifierType==="RightDoor")&&n.jsx("img",{src:ge,alt:"rotate",className:"rotate-icon"+(z?" can-rotate":" cannot-rotate"),onClick:o=>{o.stopPropagation(),Ae()}}),n.jsx("img",{src:q,alt:"delete",className:"delete-icon",onClick:o=>{o.stopPropagation(),F(e,W.fromString(E?.id||""))}})]})})]})}function we({section:t,visible:g,cellSize:e,takingPhoto:v}){const[S,F]=l.useState(t.cellElement?.offsetLeft??0),[d,C]=l.useState(t.cellElement?.offsetTop??0),f=l.useRef(null),[K,Q]=l.useState(16);function X(m){const y=f.current,a=window.getComputedStyle(y),p=document.createElement("span");p.style.font=a.font,p.style.fontSize=m+"px",p.style.fontFamily=a.fontFamily,p.style.fontWeight=a.fontWeight,p.style.position="absolute",p.style.visibility="hidden",p.style.whiteSpace="no-wrap",p.textContent=y.textContent,document.body.appendChild(p);const h=p.offsetWidth;return document.body.removeChild(p),h}function P(m){if(f.current){const y=f.current,a=X(m-1);return console.log("Current text width:",a),console.log("Paragraph width:",y.offsetWidth),a>y.offsetWidth&&K>6?(console.log("Decreasing font size to:",m-1),P(m-1)):m-1}return m}l.useEffect(()=>{setTimeout(()=>{f.current&&Q(P(K))},100)},[]),l.useEffect(()=>{v?f.current&&Q(P(48)):f.current&&Q(P(16))},[v]);const J=()=>{t.cellElement!=null&&(F(t.cellElement.offsetLeft),C(t.cellElement.offsetTop))};return l.useEffect(()=>(window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J)}),[t.cellElement]),t.cellElement&&n.jsx("div",{className:`section ${g??!0?"":"invisible"}`,style:{top:`${t.cellElement.offsetTop}px`,left:`${t.cellElement.offsetLeft}px`,width:`${t.cellsLong*e-2}px`,height:`${t.cellsTall*e-2}px`},children:n.jsx("h2",{className:"section-title",style:{fontSize:`${K}px`},ref:f,children:t.name})})}const me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEaADAAQAAAABAAAAEQAAAACOk5MBAAAB2klEQVQ4EaVSPUgcURCeeRvvciqoCRg7RQt/1uCd2gTEJoq6WlskjT+gKFoIAbUQuygWpgoGQYR0IbGwuENJygs2eqeEzdNGEAStlEMQOb03zvNYecoV3vmK3W/nm+/j25mH8IwTlM6sUHBq5erR4Dq9FuJXAgxgLiaV221Fxfm+fUIsBUi1iFxMivJ984BYhkRL8dqNrRfZmoRk5zvWDBPQ8eVZYlrrs0uy3ZSHZC0jxyAFYwctfy+0SVZJggVvPrGmnlOs7dqRdW2gz5OT1P/rqhKAMwCUuKLUeFqefoqQdKYaXaffLGbCeRYucT0ACiZl3eaJ2aOTTJCAlQbp9JiEiYNu10dEbAeCaMyOLJucxoIHNJQG+D0Y76zQ2Dy22/EKBS4SQRJSd71k8hoLPSCe9hwilOBL8dN2bZ/Z5ENrgflSQvocexuWJufhu8HGfoRniOg3Nzf7sfyLR4b+O62AMMCcvFZHc1798fv+2tfI968D5N/hfy/nFX5IqqM1v6jYY1ytlGrdszeij8Xe972JLjTK7iZeYZQIb/g6/QLAPk7xLV4XGfEEmd4P7kmsNrzDKxzl+RRqAyA6SVwmpzIJzdoDE03wClcV0QJv45xTDB42/0mYgkz4FmD8ocR4cNFcAAAAAElFTkSuQmCC",pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAbCAYAAACAyoQSAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHaADAAQAAAABAAAAGwAAAABRO+PxAAADjklEQVRIDe2Vb2hURxDAZ3bv3t1p8UhoSQSloTFBTCOogRDUmORQUGrVD1JRET8I+kFFEZqLCnlgL15B8YNo44dWBNHSoAW/FU3uUEtApUVQUBvx0BqM2tpUk/v33o6zF197DZfrOwgI4sCxu7Oz89uZm50H8F7etQxgqQEt6co2SUFfAEI5Krxpp199GzfL/irFT0nQ1mg6IlDsJQCG0BAA1iLBE9tWy+L7fLfcgoVbw1BXerUGAtF3D39PVPa1G7OJaB5HLKXEcy1mzOPWl2soSbGTnQ6ODg1tHzhak9aAWNi4qRR1AGKt8DctnXQoO6znyC73H5mZzHeeRfvS2FrW5euLzV1HikSjHNG08c4EiOCYjkbG7020dg0FghhXXajtQKo635kXcZtec5pj+fpic9fVu6grVeuT8hcupIcK7R2YwQQYciM77+RKPs2FtakYKH/PdaRX9/rvgWWt5BQHBXguoSEH+MYmAp1JPhnamu/0/+auI3Uczdrxm+/jGTObbYXlFtGvucs4my7HkqAt5gM/+Gc0CFLTuTFMJVTPiOBuvMM/4JKXM3MFbe3KNKLAdj6xHBH84wH8lBLs6JCd+vlE3Gy1FkdGpgs0qhDtZ4UuVBRaZ942Knw1hxm4nUGDpNRJrtO+DGAClZ1E6flQIM7nZ7Mwa6U7DfSUgRDHuEu1OBfjC90hULtiYf9Pjm5i6NofZFvDmvPcWz9ToL56mhqI3DbrMs7B8WMokp4LUlxhoPOWL7JNK/88/NwUX3ZDb9j3vT43IbQtmg1zKg/aQJvj7cYpbVxM2qKZG4i4wLFZnPTIKwHrOq/n53QEw6Op0U/6zeCfBZ9M0+5HATb8kr8mPW6AzdF0fT5QQ0wTOTod4RtBCE4JBNboVcEvQ6Cyop5TUMaNoLfR/MNJl3P8P6M1+CApEWq0ks/0KK9nt8xyQlkM27PCkuBVaG1mTYT91Wp9QShkrcfg9Y5wI+j+IDCtWxtOKNVztyiwEwBCk0Iiax3PEQFWZaQV5ovMAsJPuWuBQpH72BeE9u2f8nhRNDnHUHIJin8KoyAXCe//nX5xLRj46CUDyhn4eZ5hM68bNFALWpSrYLabHAkdzO7hYA/96w35/6NveF2pdQR0lvvzej0vWEh6o1Tp7fAe5gR+rbM4dpZ+5HEMSHB+OPl8i+Nz0iJ1HOpKlgDrELCKdU/Rti/07gvEeP525TXTpDp/O3DJWAAAAABJRU5ErkJggg==";function Re({booth:t,isViewingBooth:g,isSelected:e,onDeselect:v,onPickBooth:S,onSelect:F,isUnselecting:d,visible:C,cellSize:f,canPick:K,hasPickedBooth:Q,onAddVendorToBooth:X,onRemoveVendorFromBooth:P,isPublicViewingBooth:J=!1}){const[m,y]=l.useState(0),[a,p]=l.useState(0),h=l.useRef(null),[L,I]=l.useState(0),[T,O]=l.useState(0),[Y,G]=l.useState(!1),[k,$]=l.useState(null),[B,x]=l.useState(12),w=l.useRef(null),[ie,E]=l.useState(!0);function V(s){const b=h.current,H=window.getComputedStyle(b),D=document.createElement("span");D.style.font=H.font,D.style.fontSize=s+"px",D.style.fontFamily=H.fontFamily,D.style.fontWeight=H.fontWeight,D.style.position="absolute",D.style.visibility="hidden",D.style.whiteSpace="nowrap",D.textContent=b.textContent,document.body.appendChild(D);const re=D.offsetWidth;return document.body.removeChild(D),re}function z(s){if(h.current){const b=h.current;return V(s-1)>b.offsetWidth&&s-1>8?z(s-1):s-1}return s}l.useEffect(()=>{setTimeout(()=>{h.current&&x(z(B))},100)},[]),l.useEffect(()=>{t.initialElement.classList.contains("cell")&&(console.log("Setting cell to initial element:",t.initialElement.children[0]),$(t.initialElement.children[0])),y(t.initialElement.offsetLeft),p(t.initialElement.offsetTop),I(t.initialElement.offsetLeft),O(t.initialElement.offsetTop)},[t]);const ce=()=>{if(Y)return;if(k==null){y(t.initialElement.offsetLeft),I(t.initialElement.offsetLeft),p(t.initialElement.offsetTop),O(t.initialElement.offsetTop);return}const s=k.offsetTop,b=k.offsetLeft;y(b),p(s),I(b),O(s)};return l.useEffect(()=>(window.addEventListener("resize",ce),()=>{window.removeEventListener("resize",ce)}),[k,Y]),m==0||a==0||!ie?null:n.jsxs(n.Fragment,{children:[n.jsx("div",{id:t.id,ref:w,className:`booth draggable-item ${Q?"viewing":""} ${Y?"dragging":e?"selected":""} ${t.user!=null&&!g?"no-select":""} ${J?"viewing":""} ${C?"":"invisible"} ${!K&&!J?"cannot-pick":""}`,style:{top:`${a}px`,left:`${m}px`,width:`${t.cellsLong*f-(e?4:0)}px`,height:`${t.cellsTall*f-(e?4:0)}px`,transformOrigin:"center center",fontSize:`${B}px`},onClick:s=>{s.stopPropagation(),!Q&&(t.user!=null&&!g||K&&(e?v():F(t.id)))},children:n.jsx("div",{className:"custom-icon",children:n.jsxs("div",{className:"booth-inner",children:[n.jsx("p",{children:t.name}),n.jsxs("p",{className:"booth-sizing",children:[t.cellsLong,"ft x ",t.cellsTall,"ft"]}),n.jsx("p",{ref:h,children:t.user==null?"Open ":t.user.businessName})]})})}),(e||d)&&n.jsx(n.Fragment,{children:/Mobi|Android/i.test(navigator.userAgent)?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`draggable-item-options mobile-left ${d?"exiting":""}`,style:{top:`${a+t.cellsTall*f/2-10}px`,left:`${m+t.cellsLong*f/2-t.cellsLong/2-20}px`,width:"10px"},children:g?n.jsx("img",{src:pe,alt:"Person Add",className:"person-icon",onClick:s=>{s.stopPropagation(),X(t.id)}}):n.jsx("img",{src:me,alt:"pick",className:"pick-icon",onClick:s=>{s.stopPropagation(),S(t.id)}})}),n.jsx("div",{className:`draggable-item-options mobile-right ${d?"exiting":""}`,style:{top:`${a+t.cellsTall*f/2-10}px`,left:`${m+t.cellsLong*f/2+t.cellsLong*f/2+10}px`,width:"10px"},children:g&&t.user!=null?n.jsx("img",{src:q,alt:"delete",className:"delete-icon",onClick:s=>{s.stopPropagation(),P(t.id)}}):g?n.jsx(n.Fragment,{}):n.jsx(n.Fragment,{children:n.jsx("img",{src:q,alt:"delete",className:"delete-icon",onClick:s=>{s.stopPropagation(),v()}})})})]}):n.jsxs("div",{className:`draggable-item-options ${d?"exiting":""}`,style:{top:`${a+t.cellsTall*f/2-t.cellsTall*f/2-20}px`,left:`${m+t.cellsLong*f/2-t.cellsLong*f/2}px`,width:`${t.cellsLong*f}px`},children:[g&&t.user==null?n.jsx("img",{src:pe,alt:"Person Add",className:"person-icon",onClick:s=>{s.stopPropagation(),X(t.id)}}):g&&t.user!=null?n.jsx(n.Fragment,{}):n.jsx("img",{src:me,alt:"pick",className:"pick-icon",onClick:s=>{s.stopPropagation(),S(t.id)}}),g&&t.user!=null?n.jsx("img",{src:q,alt:"delete",className:"delete-icon",onClick:s=>{s.stopPropagation(),P(t.id)}}):g?n.jsx(n.Fragment,{}):n.jsx(n.Fragment,{children:n.jsx("img",{src:q,alt:"delete",className:"delete-icon",onClick:s=>{s.stopPropagation(),v()}})})]})})]})}export{Le as A,Re as B,Te as D,we as S};
