import{c as He,j as m,r}from"./index-QIV6qY6h.js";import{A as de,S as Be,D as Ve}from"./section-B7tSJiIr.js";import{T as z,S as w,l as f,m as R,I as x,s as ge,D as ze,n as Ge,o as ue}from"./firestore-DkNIo3aX.js";import{T as Ce,F as fe,L as Je,a as Ye,b as Ke,c as Qe,A as Xe}from"./add_custom_item_dialog-C5K1_xfi.js";He.createRoot(document.getElementById("root")).render(m.jsx(Ze,{}));function Ze(){const[i,_e]=r.useState(!1),[ee,Ie]=r.useState(0),[G,ye]=r.useState(0),[v,S]=r.useState([]),[P,E]=r.useState([]),[pe,el]=r.useState(0),[j,C]=r.useState(null),[xe,N]=r.useState([]),p=10,[F,q]=r.useState([]),J=r.useRef(null),[he,le]=r.useState(!1),[M,Y]=r.useState([]),[g,W]=r.useState([]),[H,we]=r.useState([]),[Te,ne]=r.useState(!1),K=r.useRef(null),[Le,ve]=r.useState([]),[h,B]=r.useState([]),[u,Q]=r.useState(null),[k,Se]=r.useState(!1),[D,ll]=r.useState(!1),[O,nl]=r.useState(!1),[be,tl]=r.useState(!1),[ol,sl]=r.useState(!1),[Ee,al]=r.useState(!1),[X,cl]=r.useState(""),[A,je]=r.useState(""),[V,il]=r.useState(""),[$,ml]=r.useState(""),[te,rl]=r.useState(""),[Z,T]=r.useState(!0),[oe,dl]=r.useState(null),[se,L]=r.useState(!1),_=r.useRef(null);function U(e,t){for(const s of t)if(e.x>=s.cellId.x&&e.x<s.cellId.x+s.cellsLong&&e.y>=s.cellId.y&&e.y<s.cellId.y+s.cellsTall)return s;return null}function Ne(e){Y([...e.map(o=>new w({name:o.name,cellId:new f({x:o.cellId.x/2,y:o.cellId.y/2}),cellsLong:o.cellsLong/2,cellsTall:o.cellsTall/2,startingItems:[]}))]);let t=ee,s=G;const a=[];for(const o of e)console.log("Generating cells for section",o.name,"at",o.cellId,"with size",o.cellsLong,"x",o.cellsTall),console.log("Needed section Width:",(o.cellsLong+o.cellId.x)*p,"Current width:",t),(o.cellsLong+o.cellId.x)*p>t&&(console.log("Added section Width:",o.cellsLong*p+o.cellId.x),t+=(o.cellsLong+o.cellId.x)*p-t),console.log("Needed section Height:",(o.cellsTall+o.cellId.y)*p,"Current height:",s),(o.cellsTall+o.cellId.y)*p>s&&(console.log("Added section Height:",o.cellsTall*p+o.cellId.y),s+=(o.cellsTall+o.cellId.y)*p-s);Ie(t),ye(s),[...Array(s/p).keys()].map(o=>{const n=[];[...Array(t/p).keys()].map(l=>{n.push({id:new f({x:l,y:o}),hasItem:!1,itemId:"",mouseOver:!1,canPlaceItem:!1,mouseOverLocation:"",inSection:U(new f({x:l,y:o}),e)!=null,size:p})}),a.push(n)}),S([...a]),setTimeout(()=>{const o=[],n=[...e];for(const l of n)l.cellElement=document.querySelector(`.App #${l.cellId.toId()}.cell:not(.cell-border)`),o.push(...l.startingItems.map(c=>new R({cell:new f({x:l.cellId.x+c.cell.x,y:l.cellId.y+c.cell.y}),item:new x({id:c.item.id,name:c.item.name,cellsLong:c.item.cellsLong,cellsTall:c.item.cellsTall,icon:c.item.icon,initialElement:document.querySelector(`.App #${c.cell.toId()}.cell:not(.cell-border)`),starterItem:!0,moveable:c.item.moveable,rotation:c.item.rotation||0})})));W([...n]);for(const l of o){const c=I=>{const y=I%2===1;return{cellsLong:y?l.item.cellsTall:l.item.cellsLong,cellsTall:y?l.item.cellsLong:l.item.cellsTall}},d=l.item.rotation||0,b=c(d);for(let I=0;I<b.cellsTall;I++)for(let y=0;y<b.cellsLong;y++)a[l.cell.y+I][l.cell.x+y].hasItem=!0,a[l.cell.y+I][l.cell.x+y].itemId=l.item.id;l.item.initialElement=document.querySelector(`.App #${l.cell.toId()}.cell:not(.cell-border)`),E(I=>[...I,l.item])}S([...a]),setTimeout(()=>{T(!1),De()},500)},100)}async function De(e,t){T(!0),L(!0),setTimeout(async()=>{const s=document.getElementById("capture"),a=await domtoimage.toPng(s);L(!1),localStorage.setItem("screenshot",a),window.close()},500)}async function Oe(){const e=new URLSearchParams(window.location.search),t=[];let s=e.get("sections");console.log("Screenshot sections from localStorage",s),s=s?.split("LAYOUTSEPARATOR")||"";const a=[];for(const o of s)a.push(w.fromJSON(o));Y([...a]),W([...a.map(o=>new w({name:o.name,cellId:new f({x:o.cellId.x/10,y:o.cellId.y/10}),cellsLong:o.cellsLong/10,cellsTall:o.cellsTall/10,startingItems:o.startingItems,items:o.startingItems.map(n=>new x({id:n.item.id,name:n.item.name,sectionCell:n.cell,cellsLong:n.item.cellsLong,cellsTall:n.item.cellsTall,icon:n.item.icon,moveable:n.item.moveable,starterItem:n.item.starterItem,rotation:n.item.rotation}))}))]),t.push(...a.map(o=>new w({name:o.name,cellId:new f({x:o.cellId.x/10,y:o.cellId.y/10}),cellsLong:o.cellsLong/10,cellsTall:o.cellsTall/10,startingItems:o.startingItems,items:o.startingItems.map(n=>new x({id:n.item.id,name:n.item.name,sectionCell:n.cell,cellsLong:n.item.cellsLong,cellsTall:n.item.cellsTall,icon:n.item.icon,moveable:n.item.moveable,starterItem:n.item.starterItem,rotation:n.item.rotation}))}))),console.log("SECTIONS TO GENERATE",t),Ne(t)}r.useEffect(()=>{Oe()},[]);function Ae(e,t,s){if(!i||e==null)return;const a=[...s],o=[],n=s.find(l=>l.name==e);console.log("NEW SECTION",n),console.log("Adding section",n.name,n.cellId),console.log("MOBILE CELLS",t),n.cellElement=document.querySelector(`.App #${n.name.split(" ").join("-")} #${n.name.split(" ").join("")}${n.cellId.toId()}.cell:not(.cell-border)`),console.log("Section element found",n.cellElement);for(const l of n.startingItems){console.log("Placing starting item",l.item.name,l.cell);const c=I=>{const y=I%2===1;return{cellsLong:y?l.item.cellsTall:l.item.cellsLong,cellsTall:y?l.item.cellsLong:l.item.cellsTall}},d=l.item.rotation||0,b=c(d);for(let I=0;I<b.cellsTall;I++)for(let y=0;y<b.cellsLong;y++){const re=t.find(We=>We.sectionName===n.name);re.cells[l.cell.y+I][l.cell.x+y].hasItem=!0,re.cells[l.cell.y+I][l.cell.x+y].itemId=l.item.id}l.item.initialElement=document.querySelector(`.App #${n.name.split(" ").join("-")} #${n.name.split(" ").join("")}${l.cell.toId()}.cell:not(.cell-border)`),console.log("Adding item to items",l.item.initialElement),o.push(new x({id:l.item.id,name:l.item.name,cellsLong:l.item.cellsLong,cellsTall:l.item.cellsTall,icon:l.item.icon,initialElement:l.item.initialElement,starterItem:!0,moveable:l.item.moveable,rotation:l.item.rotation}))}console.log("Setting sections",a),W([...a]),console.log("ITEMS",o),E(l=>[...l.filter(d=>!o.some(b=>b.id===d.id)),...o.map(d=>new x({id:d.id,name:d.name,cellsLong:d.cellsLong,cellsTall:d.cellsTall,icon:d.icon,initialElement:d.initialElement,starterItem:!0,moveable:d.moveable,rotation:d.rotation}))])}function ae(e){let t=[];return e.map(s=>t=[...t,...s]),t}function ce(e,t){console.log(e);const s=i?h.find(l=>l.sectionName===u).cells:v,a=s[e.y].length,o=s.length;if(console.log(a,o),e.x+t.cellsLong>a||e.y+t.cellsTall>o)return!1;const n=U(e,g);if(!n&&!i)return console.log("Item is out of bounds of any section"),!1;for(let l=0;l<t.cellsTall;l++)for(let c=0;c<t.cellsLong;c++){if(!i){const d=U(new f({x:e.x+c,y:e.y+l}),g);if(!d)return console.log("Item is out of bounds of any section"),!1;if(d.name!=n.name)return console.log("Item is crossing section boundaries"),!1}if(s[e.y+l][e.x+c].hasItem&&s[e.y+l][e.x+c].itemId!=t.id)return console.log("Something is already here"),!1}return!0}function Re(e,t,s){const a=Array.from(i?h.find(l=>l.sectionName===u).cells:v);if(s!=null){console.log("Removing item");const l=i?g.find(c=>c.name===u):U(s,g);l.items=l.items.filter(c=>c.id!=t.id);for(let c=0;c<t.cellsTall;c++)for(let d=0;d<t.cellsLong;d++)a[s.y+c][s.x+d].hasItem=!1,a[s.y+c][s.x+d].itemId=""}const o=i?g.find(l=>l.name===u):U(e,g),n=new f({x:e.x-o.cellId.x,y:e.y-o.cellId.y});t.sectionCell=n,o.items.push(t);for(let l=0;l<t.cellsTall;l++)for(let c=0;c<t.cellsLong;c++)a[e.y+l][e.x+c].hasItem=!0,a[e.y+l][e.x+c].itemId=t.id;if(console.log(a),i){const l=h.find(c=>c.sectionName===u);l&&(l.cells=a.map(c=>c.map(d=>({...d}))),B([...h]))}else S(a);if(console.log("Removing item from inventory",t.name),!t.hasMoved){const l=F.findIndex(c=>c.item.name==t.name&&!c.item.hasMoved);if(l!==-1){const c=[...F];c[l].quantity-=1,c[l].quantity<=0&&c.splice(l,1),q(c)}else q(F)}E(l=>(console.log("Placing item",t.id),console.log("Updating item",t.id),l.find(c=>c.id==t.id).hasMoved||(l.find(c=>c.id==t.id).hasMoved=!0),l))}function Pe(e){P.find(t=>t.name==e.name&&!t.hasMoved&&!t.starterItem)||E(t=>[...t,e])}function ie(e){console.log("Removing item",e.id),E(t=>t.filter(s=>s.id!=e.id))}function Me(e,t){const s=Array.from(v),a=l=>{const c=l%2===1;return{cellsWide:c?e.cellsTall:e.cellsLong,cellsTall:c?e.cellsLong:e.cellsTall}},o=e.rotation||0,n=a(o);for(let l=0;l<n.cellsTall;l++)for(let c=0;c<n.cellsWide;c++)s[t.y+l][t.x+c].hasItem=!1,s[t.y+l][t.x+c].itemId="";S(s),console.log("DELETING ITEM",e.id),E(l=>(console.log(),l.filter(c=>c.id!=e.id))),q(l=>{const c=l.findIndex(d=>d.item.name==e.name&&!d.item.hasMoved);if(c!==-1){const d=[...l];return d[c].quantity+=1,d}else return[...l,new ue({item:new x({id:e.id,name:e.name,cellsLong:n.cellsWide,cellsTall:n.cellsTall,icon:e.icon}),quantity:1})]})}function ke(e,t){const s=Array.from(i?h.find(l=>l.sectionName===u).cells:v);console.log("DELETING ITEM ROTATE",e.id,e.rotation);const a=l=>{const c=l%2===1;return{cellsWide:c?e.cellsTall:e.cellsLong,cellsTall:c?e.cellsLong:e.cellsTall}},o=e.rotation||0,n=a(o);for(let l=0;l<n.cellsTall;l++)for(let c=0;c<n.cellsWide;c++)console.log("Deleting cell",t.y+l,t.x+c),s[t.y+l][t.x+c].hasItem=!1,s[t.y+l][t.x+c].itemId="";S([...s]),console.log("DELETING ITEM",e.id)}function $e(e,t){const s=i?h.find(n=>n.sectionName===u).cells:v,a=Array.from(s);if(s[e.y]==null){me();return}const o=ce(e,t);a.forEach(n=>n.forEach(l=>{l.mouseOver=!1,l.canPlaceItem=!1,l.mouseOverLocation=""}));for(let n=0;n<t.cellsTall;n++)for(let l=0;l<t.cellsLong;l++)e.y+n<a.length&&e.x+l<a[e.y+n].length&&(t.cellsLong===1&&t.cellsTall===1?a[e.y+n][e.x+l].mouseOverLocation="single":t.cellsTall===1?l===0?a[e.y+n][e.x+l].mouseOverLocation="leftFull":l===t.cellsLong-1?a[e.y+n][e.x+l].mouseOverLocation="rightFull":a[e.y+n][e.x+l].mouseOverLocation="middleFull":t.cellsLong===1?n===0?a[e.y+n][e.x+l].mouseOverLocation="topFull":n===t.cellsTall-1?a[e.y+n][e.x+l].mouseOverLocation="bottomFull":a[e.y+n][e.x+l].mouseOverLocation="middleVFull":n===0&&l===0?a[e.y+n][e.x+l].mouseOverLocation="topLeftCorner":n===0&&l===t.cellsLong-1?a[e.y+n][e.x+l].mouseOverLocation="topRightCorner":n===t.cellsTall-1&&l===0?a[e.y+n][e.x+l].mouseOverLocation="bottomLeftCorner":n===t.cellsTall-1&&l===t.cellsLong-1?a[e.y+n][e.x+l].mouseOverLocation="bottomRightCorner":n===0?a[e.y+n][e.x+l].mouseOverLocation="top":n===t.cellsTall-1?a[e.y+n][e.x+l].mouseOverLocation="bottom":l===0?a[e.y+n][e.x+l].mouseOverLocation="left":l===t.cellsLong-1?a[e.y+n][e.x+l].mouseOverLocation="right":a[e.y+n][e.x+l].mouseOverLocation="middle",a[e.y+n][e.x+l].mouseOver=!0,a[e.y+n][e.x+l].canPlaceItem=o);if(i){const n=h.find(l=>l.sectionName===u);n&&(n.cells=a.map(l=>l.map(c=>({...c}))),B([...h])),B(l=>l.map(c=>c.sectionName===u?{...c,cells:a}:c))}else S(a)}function me(){const e=Array.from(i?h.find(t=>t.sectionName===u).cells:v);e.forEach(t=>t.forEach(s=>{s.mouseOver=!1,s.canPlaceItem=!1,s.mouseOverLocation=""})),S(e)}r.useEffect(()=>{Ae(u,h,g)},[u]),r.useEffect(()=>{const e=()=>{const t=P.find(s=>s.id===j);console.log("Unselecting item",j),C(null),t&&(N(s=>[...s,t.id]),console.log("Unselecting item",t.id),setTimeout(()=>{N(s=>s.filter(a=>a!==t.id))},300))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[j,P]);function Ue(e){C(null),N(t=>[...t,e]),console.log("Unselecting item",e),setTimeout(()=>{N(t=>t.filter(s=>s!==e))},300)}function Fe(e){const t=P.find(s=>s.id===j);console.log("Unselecting item",j),C(e),t&&(N(s=>[...s,t.id]),console.log("Unselecting item",t.id),setTimeout(()=>{N(s=>s.filter(a=>a!==t.id))},300))}function qe(e){q(t=>[...t,e])}return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"App",children:[m.jsx("h1",{className:"title",children:"LayItOut"}),m.jsx("br",{}),(k||D)&&m.jsxs("div",{className:"template-name-row",children:[m.jsx("label",{htmlFor:"template-name",children:"Template Name:"}),m.jsx("input",{type:"text",id:"template-name",name:"template-name",onChange:e=>je(e.target.value),value:A})]}),O&&m.jsx("div",{className:"design-name-row",children:m.jsxs("label",{htmlFor:"design-name",children:["Design Name: ",X]})}),(k||D)&&m.jsxs("div",{className:"template-creation",children:[m.jsxs("button",{className:"action-btn",onClick:()=>{if(A.trim()==""){alert("Please enter a template name");return}if(H.some(e=>e.name===A&&(D?e.id!==oe.id:!0))){alert("Template with this name already exists");return}D?(T(!0),L(!0),setTimeout(async()=>{const e=document.getElementById("capture"),t=await domtoimage.toPng(e);L(!1);const s=H.map(a=>a.id===oe.id?(console.log("SECTION",g),new z({name:A,previewImage:t,sections:g.map(o=>new w({name:o.name,cellId:new f({x:a.sections.find(n=>n.name==o.name).cellId.x*(i?20:10),y:a.sections.find(n=>n.name==o.name).cellId.y*(i?20:10)}),cellsLong:o.cellsLong*10,cellsTall:o.cellsTall*10,startingItems:o.items.map(n=>new R({cell:new f({x:n.sectionCell.x,y:n.sectionCell.y}),item:new x({id:n.id,name:n.name,cellsLong:n.cellsLong,cellsTall:n.cellsTall,icon:n.icon,starterItem:!0,moveable:n.moveable,rotation:n.rotation})}))})),id:a.id})):new z({name:a.name,previewImage:a.previewImage,sections:a.sections.map(o=>new w({name:o.name,cellId:new f({x:o.cellId.x*(i?20:10),y:o.cellId.y*(i?20:10)}),cellsLong:o.cellsLong*(i?20:10),cellsTall:o.cellsTall*(i?20:10),startingItems:o.startingItems.map(n=>new R({cell:new f({x:n.cell.x*(i?2:1),y:n.cell.y*(i?2:1)}),item:new x({id:n.item.id,name:n.item.name,cellsLong:n.item.cellsLong*2,cellsTall:n.item.cellsTall*2,icon:n.item.icon,starterItem:n.item.starterItem,moveable:n.item.moveable,rotation:n.item.rotation})}))})),id:a.id}));ge(V,$,s).then(()=>{console.log("Template updated successfully"),T(!1);const a=new URLSearchParams(window.location.search),o=a.get("companyId"),n=a.get("areaId");window.location.href=`/LayItOut/Layout/?companyId=${o}&areaId=${n}&type=view-area`})})):(T(!0),L(!0),setTimeout(async()=>{const e=document.getElementById("capture"),t=await domtoimage.toPng(e);L(!1);const s=new z({name:A,previewImage:t,sections:g.map(o=>new w({name:o.name,cellId:new f({x:M.find(n=>n.name==o.name).cellId.x*20,y:M.find(n=>n.name==o.name).cellId.y*20}),cellsLong:o.cellsLong*10,cellsTall:o.cellsTall*10,startingItems:o.items.map(n=>new R({cell:new f({x:n.sectionCell.x,y:n.sectionCell.y}),item:new x({id:n.id,name:n.name,cellsLong:n.cellsLong,cellsTall:n.cellsTall,icon:n.icon,starterItem:!0,moveable:n.moveable,rotation:n.rotation})}))})),id:A+(Math.random()*1e4).toString()}),a=[...H.map(o=>new z({name:o.name,previewImage:o.previewImage,sections:o.sections.map(n=>new w({name:n.name,cellId:new f({x:n.cellId.x*(i?20:10),y:n.cellId.y*(i?20:10)}),cellsLong:n.cellsLong*(i?20:10),cellsTall:n.cellsTall*(i?20:10),startingItems:n.startingItems.map(l=>new R({cell:new f({x:l.cell.x*(i?2:1),y:l.cell.y*(i?2:1)}),item:new x({id:l.item.id,name:l.item.name,cellsLong:l.item.cellsLong*2,cellsTall:l.item.cellsTall*2,icon:l.item.icon,starterItem:l.item.starterItem,moveable:l.item.moveable,rotation:l.item.rotation})}))})),id:o.id})),s];ge(V,$,a).then(()=>{console.log("Template updated successfully"),T(!1);const o=new URLSearchParams(window.location.search),n=o.get("companyId"),l=o.get("areaId");window.location.href=`/LayItOut/Layout/?companyId=${n}&areaId=${l}&type=view-area`})},500))},children:[k?"Create":"Save"," Template"]}),m.jsx("button",{className:"action-btn",onClick:()=>{Se(!1),we([]),Y([]),W([]),B([]),ve([]),Q(null)},children:"Cancel"})]}),Ee&&m.jsxs("div",{className:"template-creation",children:[m.jsx("button",{className:"action-btn",onClick:()=>{T(!0),L(!0),setTimeout(async()=>{const e=document.getElementById("capture"),t=await domtoimage.toPng(e);L(!1);const s=new ze({name:X,previewImage:t,areaId:$,sections:g.map(a=>new w({name:a.name,cellId:new f({x:M.find(o=>o.name==a.name).cellId.x*20,y:M.find(o=>o.name==a.name).cellId.y*20}),cellsLong:a.cellsLong*10,cellsTall:a.cellsTall*10,startingItems:a.items.map(o=>new R({cell:new f({x:o.sectionCell.x,y:o.sectionCell.y}),item:new x({id:o.id,name:o.name,cellsLong:o.cellsLong,cellsTall:o.cellsTall,icon:o.icon,starterItem:!0,moveable:o.moveable,rotation:o.rotation})}))})),id:te});Ge(V,$,s).then(()=>{console.log("Design updated successfully"),T(!1)})},500)},children:"Save"}),m.jsx("button",{className:"action-btn",onClick:()=>{},children:"Submit"})]}),Z&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"loader-backdrop"}),m.jsx("div",{className:"loader"})]})," ",m.jsxs("div",{className:"layout",children:[!O&&m.jsx(Ce,{isViewingDesign:O,isEditingTemplate:D,isCreatingTemplate:k,maxHeight:i?200:G,showAddCustomItem:()=>{_.current?.showModal()},addDraggingItem:Pe,removeItem:ie,inventoryItems:F.map(e=>new ue({item:new x({id:e.item.id,name:e.item.name,cellsLong:e.item.cellsLong,cellsTall:e.item.cellsTall,icon:e.item.icon,displayItem:!0}),quantity:e.quantity}))}),i?m.jsxs("div",{className:"mobile-areas",style:{height:pe+"px"},children:[m.jsx("img",{src:fe,onClick:()=>{const e=g.findIndex(s=>s.name==u);if(e===-1)return;const t=(e-1+g.length)%g.length;Q(g[t].name),console.log("Changing viewing section to",g[t].name)},className:"back-mobile-areas"}),Le.map((e,t)=>m.jsx(de,{width:e.width,height:e.height,cells:ae(h.find(s=>s.sectionName==e.sectionName).cells),id:e.sectionName,visibile:u==null?!0:e.sectionName==u,section:e.sectionName},t)),m.jsx("img",{src:fe,onClick:()=>{const e=g.findIndex(s=>s.name==u);if(e===-1)return;const t=(e+1)%g.length;Q(g[t].name),console.log("Changing viewing section to",g[t].name)},className:"forward-mobile-areas"})]}):m.jsx(de,{width:ee,height:G,cells:ae(v)})]}),O&&m.jsx("div",{className:"design-view",children:m.jsx("button",{className:"action-btn",onClick:()=>{window.location.href=`/LayItOut/Print/?companyId=${V}&areaId=${$}&designName=${X}&designId=${te}`},children:"Print"})})]}),m.jsxs("div",{id:se?"capture":"",children:[g.map(e=>m.jsx(Be,{takingPhoto:se,section:e,visible:u==null?!0:e.name==u,cellSize:p},e.cellId.toId())),P.map(e=>m.jsx(Ve,{cellSize:p,isViewingDesign:O,removeItem:ie,visible:i?!e.hasMoved&&!e.starterItem?!0:u==null?!1:e.starterItem?g.find(t=>t.name==u)?.startingItems.some(t=>t.item.id===e.id):g.find(t=>t.name==u)?.items.some(t=>t.id===e.id):!0,item:e,canPlaceItem:ce,placeItem:Re,deleteItemRotate:ke,highlightCells:$e,unHighlightCells:me,deleteItem:Me,isSelected:j===e.id,onSelect:Fe,isUnselecting:xe.includes(e.id),onDeselect:()=>Ue(e.id)},e.id))]}),i&&!Z&&m.jsx("div",{className:"layout-icon",onClick:()=>{J.current?.showModal(),le(!0),console.log("Showing layout dialog")},children:m.jsx("img",{src:Je,alt:""})}),!Z&&!(k||D||O)&&m.jsx("div",{className:"template-icon",onClick:()=>{K.current?.showModal(),ne(!0),console.log("Showing template dialog")},children:m.jsx("img",{src:Ye,alt:""})}),m.jsx(Ke,{isViewingArea:be,dialogRef:K,isOpen:Te,closeDialog:()=>{K.current?.close(),ne(!1)},templates:H}),m.jsx(Qe,{dialogRef:J,isOpen:he,closeDialog:()=>{J.current?.close(),le(!1)},layoutSections:M}),m.jsx(Xe,{dialogRef:_,addInventoryItem:qe,closeDialog:()=>{_.current?.close()}})]})}
