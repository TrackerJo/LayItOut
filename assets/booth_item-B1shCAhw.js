import{j as n,r as l}from"./index-CIvrVTT1.js";import{C as W,I as de}from"./firestore-BIrJGVi9.js";function Ee({id:t,mouseOver:g,canPlaceItem:e,hasItem:L,mouseOverLocation:I,inSection:S,section:d,size:R}){return n.jsx("div",{className:`cell ${g?"hovered":""} ${e?"legal":"illegal"} ${L?"hasItem":""} ${I} ${S?"":"outside"}`,id:`${d==null?"":d.split(" ").join("")}${t.toId()}`,style:{width:`${R}px`,height:`${R}px`},children:n.jsx("div",{className:"cell cell-border",id:`${d==null?"":d.split(" ").join("")}${t.toId()}`})})}function Le({width:t,height:g,cells:e,id:L,visibile:I,section:S}){return n.jsx("div",{className:`area ${I??!0?"":"invisible"}`,style:{width:`${t}px`,height:`${g}px`},id:L!=null?L.split(" ").join("-"):"",children:e.map(d=>n.jsx(Ee,{size:d.size,id:d.id,canPlaceItem:d.canPlaceItem,mouseOver:d.mouseOver,hasItem:d.hasItem,itemId:d.itemId,mouseOverLocation:d.mouseOverLocation,inSection:d.inSection,section:S}))})}const V="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAADwAAAADW5XGhAAABRUlEQVQoFY2Tz0oDMRDGv4lgPXkUPAiCvfUBbD3VLoJoBUuPPoI+jlffQIqiUC9tb/45+QIF7bXFB9jDZjrZNptN090a2M0km++XyZdZ4rPGH4AdaN2mwddI4tLGtdo29nd7ILqExq2S1w1AW1DqlaPj0zK1Jwb3MZk+kBFw1DiHoieJkqJMAvHPrEPjcZwCNkGKxEaXAYogZeIAEELQlS3uUsPMmZdpm3W2eRnYSecJKou59WLzTVmR109mIzC+3Zy+N4a5sYsCAFerFRzuyT2jLpBPWRqD1aPUS+RkLvIAOfGFXGkfv9MmNF+LB0pgL9w6aTnpIso8CMQ5wzJPmDU0tWn4PrSgFLDpqsziDGKKLaErC6H/iO1uHmT575CY05N66qRnzqVtRau9D6GmMedInud1RbIqNmMafLwh0bIhxSB9MAfmu9CGVRsdYgAAAABJRU5ErkJggg==",ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGaADAAQAAAABAAAAGQAAAABY85deAAABrUlEQVRIDe1VPUsDQRB9ezk0GO0FwVhFBQtDWot09oqFCGopgp1ILoWNEEHRRmy0EmwEK7XxB1gIfjQWdmlFLEQRDcaM7y4f3O4lmJw2QhYuu29m3szeu2ECmGtZYsjKAVZk0HSFxVaAqNBL2ywiuIYjcwF/CIMqc0QhgwkoTBEnuCd9udaQU6s+3PKRbyIWsjhi4n2y83wOfVnyKOLEh0MdLb7BIgRpfCKFdeWghGMvk7DwK0axoa5CZdZIWbml9hnDNqLhXwKb/CFKdanlyak7D89LFB0INocWTLCHD0CVTHMVu0Wi1P29avD2jEyz8DYft9N+Xg4KUHJGeWewowomweb3uOddn2qOtNheEyg80rZJ/1fN1/iQoGsS3Tjn7jaQtmx+7GHNkkIfi8Ro22Xrbmm+RmBJOtHjSsb2r7OCeltwJXRXsbw18ftQi61yNVKwiOb+G9Au0pKObbn+g1w2XrxrlhBv+rpx9Fdiy1yDWPlnNKyO3HC0JDm33uhpOF19rC7GRxg/xjF14bN7x7pjgJ5xpl7g4BwgMWKSAljwzCKn9QoEYtuGnxT4Bng+WDuZ4k7PAAAAAElFTkSuQmCC";function Te({isCreatingArea:t,isCreatingTemplate:g,item:e,canPlaceItem:L,placeItem:I,deleteItem:S,deleteItemRotate:d,isSelected:R,onSelect:f,onDeselect:O,isUnselecting:Q,highlightCells:U,unHighlightCells:P,visible:F,removeItem:v,isViewingDesign:h,cellSize:r,isPlacingItem:m}){const[k,p]=l.useState(0),[G,x]=l.useState(0),Y=l.useRef(null),[J,C]=l.useState(0),[X,B]=l.useState(0),[$,y]=l.useState(!1),[T,ae]=l.useState(0),[E,H]=l.useState(null),[z,s]=l.useState(!0),[K,Z]=l.useState(12),D=l.useRef(null),[ce,ve]=l.useState(!0),[pe,ie]=l.useState(!1);l.useEffect(()=>(window.addEventListener("mousedown",()=>ie(!0)),window.addEventListener("mouseup",()=>ie(!1)),()=>{window.removeEventListener("mousedown",()=>ie(!0)),window.removeEventListener("mouseup",()=>ie(!1))}),[]);const _=o=>{const A=o%2===1;return{width:A?e.cellsTall*r:e.cellsLong*r,height:A?e.cellsLong*r:e.cellsTall*r,cellsWide:A?e.cellsTall:e.cellsLong,cellsTall:A?e.cellsLong:e.cellsTall}},ee=o=>{const A=e.cellsLong*r,a=e.cellsTall*r;switch(o%4){case 0:return{x:0,y:0};case 1:return{x:(a-A)/2,y:(A-a)/2};case 2:return{x:0,y:0};case 3:return{x:(a-A)/2,y:(A-a)/2};default:return{x:0,y:0}}},re=()=>{const o=T+1,A=_(o),a=de.fromDoc(e.toDoc());a.cellsLong=A.cellsWide,a.cellsTall=A.cellsTall,a.initialElement=e.initialElement,a.rotation=o,a.hasMoved=e.hasMoved;let i=E;if(!e.hasMoved&&e.rotation!=0||i&&L(W.fromString(i.id),a)){i==null&&(i=e.initialElement),console.log("ROTATE ITEM",e.id,"to rotation:",o,"at cell:",i?.id),ae(o),d(e,W.fromString(i.id)),e.rotation=o;const N=ee(o),c=i.offsetLeft,M=i.offsetTop;p(c+N.x),x(M+N.y),C(c+N.x),B(M+N.y)}};function xe(o){const A=Y.current,a=window.getComputedStyle(A),i=document.createElement("span");i.style.font=a.font,i.style.fontSize=o+"px",i.style.fontFamily=a.fontFamily,i.style.fontWeight=a.fontWeight,i.style.position="absolute",i.style.visibility="hidden",i.style.whiteSpace="nowrap",i.textContent=A.textContent,document.body.appendChild(i);const N=i.offsetWidth;return document.body.removeChild(i),N}function Ae(o){if(Y.current){const A=Y.current;return xe(o-1)>A.offsetWidth&&o-1>8?Ae(o-1):o-1}return o}l.useEffect(()=>{setTimeout(()=>{Y.current&&Z(Ae(K)),e.isDisplayItem&&!e.hasMoved&&(console.log("Starting item as dragging item"),y(!0))},100)},[]),l.useEffect(()=>{e.initialElement!=null&&(console.log("Item initial element:",e.rotation),e.rotation&&setTimeout(()=>{console.log("Rotating item to initial rotation:",e.rotation);for(let o=0;o<e.rotation;o++)console.log("Rotating item",o+1,"times"),ae(A=>{const a=(A+1)%4,i=ee(a),N=e.initialElement.offsetLeft,c=e.initialElement.offsetTop;return p(N+i.x),x(c+i.y),C(N+i.x),B(c+i.y),a})},100),e.initialElement&&(e.initialElement.classList.contains("cell")&&(console.log("Setting cell to initial element:",e.initialElement.children[0]),H(e.initialElement.children[0])),p(e.initialElement.offsetLeft),x(e.initialElement.offsetTop),C(e.initialElement.offsetLeft),B(e.initialElement.offsetTop)))},[e]);const fe=()=>{if($)return;if(E==null){p(e.initialElement.offsetLeft),C(e.initialElement.offsetLeft),x(e.initialElement.offsetTop),B(e.initialElement.offsetTop);return}const o=E.offsetTop,A=E.offsetLeft,a=ee(T);p(A+a.x),x(o+a.y),C(A+a.x),B(o+a.y)};l.useEffect(()=>(window.addEventListener("resize",fe),()=>{window.removeEventListener("resize",fe)}),[E,T,$]);const te=o=>{o.preventDefault()};l.useEffect(()=>{if(console.log("IS Dragging: ",$),$){C(k),B(G),document.body.addEventListener("touchmove",te,{passive:!1});const o=document.getElementById(e.id)?.getBoundingClientRect(),A=o?o.left-k:0,a=o?o.top-G:0;R&&O();const i=(c,M,u)=>{const b=_(T),w=de.fromDoc(e.toDoc());w.cellsLong=b.cellsWide,w.cellsTall=b.cellsTall,w.initialElement=e.initialElement,w.rotation=T,w.hasMoved=e.hasMoved,w.id=e.id;let j=u;if(!j||!j.classList?.contains("cell")){const q=document.elementFromPoint(c,M);q?.classList?.contains("cell")&&(j=q)}j?.classList?.contains("cell")?U(W.fromString(j.id),w):j?.classList?.contains("section-modifier")?(console.log("Target element is a section modifier, highlighting cells",j),U(W.fromString(j.dataset.cell),w)):(console.log("Target element is not a cell or section modifier, not highlighting cells",j),P()),p(c-A),x(M-a+5),console.log("Is mouse down:",pe)},N=(c,M)=>{console.log("Drag ended"),P(),document.body.removeEventListener("touchmove",te);const u=document.elementFromPoint(c,M);if(E!==null&&u?.dataset.cell===E.id){console.log("Target element is the same cell, not placing item"),p(J),x(X),y(!1);return}if(!u?.classList?.contains("cell")&&!u?.classList?.contains("section-modifier")){if(e.isDisplayItem&&!e.hasMoved){console.log("Removing item from toolbox"),v(e),y(!1);return}y(!1),p(J),x(X)}else if(u?.classList?.contains("section-modifier")){if(console.log("Placing item on section modifier cell"),console.log("Target element:",u.dataset.cell),u.dataset.cell==""){if(console.warn("Section modifier cell data is null, cannot place item"),e.isDisplayItem&&!e.hasMoved){console.log("Removing item from toolbox"),v(e),y(!1);return}y(!1),p(J),x(X);return}const b=_(T),w={...e,cellsLong:b.cellsWide,cellsTall:b.cellsTall};if(!L(W.fromString(u.dataset.cell),w)){if(e.isDisplayItem&&!e.hasMoved){console.log("Removing item from toolbox"),v(e);return}p(J),x(X),y(!1);return}const j=u.offsetTop,q=u.offsetLeft,oe=ee(T),le=q+oe.x,se=j+oe.y;p(le),x(se),C(le),B(se),y(!1),I(W.fromString(u.dataset.cell),w,E!=null?W.fromString(E.id):null),console.log("Placed item at cell:",u),H(document.getElementById(u.dataset.cell))}else{const b=_(T),w={...e,cellsLong:b.cellsWide,cellsTall:b.cellsTall};if(!L(W.fromString(u.id),w)){if(e.isDisplayItem&&!e.hasMoved){console.log("Removing item from toolbox"),v(e);return}p(J),x(X),y(!1);return}const j=u.offsetTop,q=u.offsetLeft,oe=ee(T),le=q+oe.x,se=j+oe.y;p(le),x(se),C(le),B(se),I(W.fromString(u.id),w,E!=null?W.fromString(E.id):null),console.log("Placed item at cell:",u),H(u),y(!1)}y(!1)};return document.onmousemove=c=>{c.preventDefault(),i(c.clientX,c.clientY,c.target)},document.onmouseup=c=>{console.log("Mouse up at:",c.clientX,c.clientY),N(c.clientX,c.clientY),document.onmousemove=null,document.onmouseup=null,document.ontouchmove=null,document.ontouchend=null},document.ontouchmove=c=>{c.preventDefault();const M=c.touches[0];i(M.clientX,M.clientY,c.target)},document.ontouchend=c=>{const M=c.changedTouches[0];N(M.clientX,M.clientY),document.removeEventListener("touchmove",te),document.onmousemove=null,document.onmouseup=null,document.ontouchmove=null,document.ontouchend=null},()=>{document.removeEventListener("touchmove",te)}}else document.onmousemove=null,document.onmouseup=null,document.ontouchmove=null,document.ontouchend=null,document.body.removeEventListener("touchmove",te)},[$,E,T]);const ne=_(T);return k==0||G==0||!ce?null:n.jsxs(n.Fragment,{children:[n.jsx("div",{id:e.id,ref:D,className:`draggable-item ${m?"is-placing":""} ${e.isSectionModifier?"section-modifier":""} ${h?"viewing":""} ${e.isSectionModifier&&!e.moveable?"placed-modifier":""} ${e.isSectionModifier?e.sectionModifierType?.toString():""} ${$?"dragging":R?"selected":""} ${e.moveable?"":"not-moveable"} ${F?"":"invisible"}`,"data-cell":E?.id||"",style:{top:`${G}px`,left:`${k}px`,width:`${e.cellsLong*(e.isDisplayItem&&!$&&!e.hasMoved?10:r)-(R?4:0)-(e.sectionModifierType=="LeftWall"||e.sectionModifierType=="RightWall"||e.sectionModifierType==="LeftWindow"||e.sectionModifierType==="RightWindow"?1:0)}px`,height:`${e.cellsTall*(e.isDisplayItem&&!$&&!e.hasMoved?10:r)-(R?4:0)-(e.sectionModifierType=="TopWall"||e.sectionModifierType=="BottomWall"||e.sectionModifierType==="TopWindow"||e.sectionModifierType==="BottomWindow"?1:0)}px`,rotate:`${T*90}deg`,transformOrigin:"center center",fontSize:`${K}px`},onMouseDown:(e.moveable||t||g)&&!h?()=>y(!0):void 0,onTouchStart:(e.moveable||t||g)&&!h?o=>{o.preventDefault(),y(!0)}:void 0,onClick:o=>{console.log("Clicked on item:",e.id),y(!1),o.stopPropagation(),!(!e.moveable&&!t&&!g||h)&&(R?O():f(e.id))},children:e.isSectionModifier?e.sectionModifierType==="LeftDoor"||e.sectionModifierType==="RightDoor"?n.jsx("img",{src:e.icon,alt:"icon"}):null:e.icon.includes("custom-")?n.jsx("div",{className:e.isSectionItem?"custom-section":"custom-icon",children:n.jsx("div",{children:n.jsx("p",{ref:Y,children:e.icon.split("custom-")[1]})})}):n.jsx("img",{src:e.icon,alt:"icon"})}),(R||Q)&&n.jsx(n.Fragment,{children:/Mobi|Android/i.test(navigator.userAgent)?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`draggable-item-options mobile-left ${Q?"exiting":""}`,style:{top:`${G+e.cellsTall*r/2-10}px`,left:`${k+e.cellsLong*r/2-ne.width/2-20}px`,width:"10px"},children:n.jsx("img",{src:ue,alt:"rotate",className:"rotate-icon"+(z?" can-rotate":" cannot-rotate"),onClick:o=>{o.stopPropagation(),re()}})}),n.jsx("div",{className:`draggable-item-options mobile-right ${Q?"exiting":""}`,style:{top:`${G+e.cellsTall*r/2-10}px`,left:`${k+e.cellsLong*r/2+ne.width/2+10}px`,width:"10px"},children:n.jsx("img",{src:V,alt:"delete",className:"delete-icon",onClick:o=>{o.stopPropagation(),S(e,W.fromString(E?.id||""))}})})]}):n.jsxs("div",{className:`draggable-item-options ${Q?"exiting":""}`,style:{top:`${G+e.cellsTall*r/2-ne.height/2-20}px`,left:`${k+e.cellsLong*r/2-ne.width/2}px`,width:`${ne.width}px`},children:[(!e.isSectionModifier||e.sectionModifierType==="LeftDoor"||e.sectionModifierType==="RightDoor")&&n.jsx("img",{src:ue,alt:"rotate",className:"rotate-icon"+(z?" can-rotate":" cannot-rotate"),onClick:o=>{o.stopPropagation(),re()}}),n.jsx("img",{src:V,alt:"delete",className:"delete-icon",onClick:o=>{o.stopPropagation(),S(e,W.fromString(E?.id||""))}})]})})]})}function we({section:t,visible:g,cellSize:e,takingPhoto:L}){const[I,S]=l.useState(t.cellElement?.offsetLeft??0),[d,R]=l.useState(t.cellElement?.offsetTop??0),f=l.useRef(null),[O,Q]=l.useState(16);function U(v){const h=f.current,r=window.getComputedStyle(h),m=document.createElement("span");m.style.font=r.font,m.style.fontSize=v+"px",m.style.fontFamily=r.fontFamily,m.style.fontWeight=r.fontWeight,m.style.position="absolute",m.style.visibility="hidden",m.style.whiteSpace="no-wrap",m.textContent=h.textContent,document.body.appendChild(m);const k=m.offsetWidth;return document.body.removeChild(m),k}function P(v){if(f.current){const h=f.current,r=U(v-1);return console.log("Current text width:",r),console.log("Paragraph width:",h.offsetWidth),r>h.offsetWidth&&O>6?(console.log("Decreasing font size to:",v-1),P(v-1)):v-1}return v}l.useEffect(()=>{setTimeout(()=>{f.current&&Q(P(O))},100)},[]),l.useEffect(()=>{L?f.current&&Q(P(48)):f.current&&Q(P(16))},[L]);const F=()=>{t.cellElement!=null&&(S(t.cellElement.offsetLeft),R(t.cellElement.offsetTop))};return l.useEffect(()=>(window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}),[t.cellElement]),t.cellElement&&n.jsx("div",{className:`section ${g??!0?"":"invisible"}`,style:{top:`${t.cellElement.offsetTop}px`,left:`${t.cellElement.offsetLeft}px`,width:`${t.cellsLong*e-2}px`,height:`${t.cellsTall*e-2}px`},children:n.jsx("h2",{className:"section-title",style:{fontSize:`${O}px`},ref:f,children:t.name})})}const ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEaADAAQAAAABAAAAEQAAAACOk5MBAAAB2klEQVQ4EaVSPUgcURCeeRvvciqoCRg7RQt/1uCd2gTEJoq6WlskjT+gKFoIAbUQuygWpgoGQYR0IbGwuENJygs2eqeEzdNGEAStlEMQOb03zvNYecoV3vmK3W/nm+/j25mH8IwTlM6sUHBq5erR4Dq9FuJXAgxgLiaV221Fxfm+fUIsBUi1iFxMivJ984BYhkRL8dqNrRfZmoRk5zvWDBPQ8eVZYlrrs0uy3ZSHZC0jxyAFYwctfy+0SVZJggVvPrGmnlOs7dqRdW2gz5OT1P/rqhKAMwCUuKLUeFqefoqQdKYaXaffLGbCeRYucT0ACiZl3eaJ2aOTTJCAlQbp9JiEiYNu10dEbAeCaMyOLJucxoIHNJQG+D0Y76zQ2Dy22/EKBS4SQRJSd71k8hoLPSCe9hwilOBL8dN2bZ/Z5ENrgflSQvocexuWJufhu8HGfoRniOg3Nzf7sfyLR4b+O62AMMCcvFZHc1798fv+2tfI968D5N/hfy/nFX5IqqM1v6jYY1ytlGrdszeij8Xe972JLjTK7iZeYZQIb/g6/QLAPk7xLV4XGfEEmd4P7kmsNrzDKxzl+RRqAyA6SVwmpzIJzdoDE03wClcV0QJv45xTDB42/0mYgkz4FmD8ocR4cNFcAAAAAElFTkSuQmCC",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAbCAYAAACAyoQSAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHaADAAQAAAABAAAAGwAAAABRO+PxAAADjklEQVRIDe2Vb2hURxDAZ3bv3t1p8UhoSQSloTFBTCOogRDUmORQUGrVD1JRET8I+kFFEZqLCnlgL15B8YNo44dWBNHSoAW/FU3uUEtApUVQUBvx0BqM2tpUk/v33o6zF197DZfrOwgI4sCxu7Oz89uZm50H8F7etQxgqQEt6co2SUFfAEI5Krxpp199GzfL/irFT0nQ1mg6IlDsJQCG0BAA1iLBE9tWy+L7fLfcgoVbw1BXerUGAtF3D39PVPa1G7OJaB5HLKXEcy1mzOPWl2soSbGTnQ6ODg1tHzhak9aAWNi4qRR1AGKt8DctnXQoO6znyC73H5mZzHeeRfvS2FrW5euLzV1HikSjHNG08c4EiOCYjkbG7020dg0FghhXXajtQKo635kXcZtec5pj+fpic9fVu6grVeuT8hcupIcK7R2YwQQYciM77+RKPs2FtakYKH/PdaRX9/rvgWWt5BQHBXguoSEH+MYmAp1JPhnamu/0/+auI3Uczdrxm+/jGTObbYXlFtGvucs4my7HkqAt5gM/+Gc0CFLTuTFMJVTPiOBuvMM/4JKXM3MFbe3KNKLAdj6xHBH84wH8lBLs6JCd+vlE3Gy1FkdGpgs0qhDtZ4UuVBRaZ942Knw1hxm4nUGDpNRJrtO+DGAClZ1E6flQIM7nZ7Mwa6U7DfSUgRDHuEu1OBfjC90hULtiYf9Pjm5i6NofZFvDmvPcWz9ToL56mhqI3DbrMs7B8WMokp4LUlxhoPOWL7JNK/88/NwUX3ZDb9j3vT43IbQtmg1zKg/aQJvj7cYpbVxM2qKZG4i4wLFZnPTIKwHrOq/n53QEw6Op0U/6zeCfBZ9M0+5HATb8kr8mPW6AzdF0fT5QQ0wTOTod4RtBCE4JBNboVcEvQ6Cyop5TUMaNoLfR/MNJl3P8P6M1+CApEWq0ks/0KK9nt8xyQlkM27PCkuBVaG1mTYT91Wp9QShkrcfg9Y5wI+j+IDCtWxtOKNVztyiwEwBCk0Iiax3PEQFWZaQV5ovMAsJPuWuBQpH72BeE9u2f8nhRNDnHUHIJin8KoyAXCe//nX5xLRj46CUDyhn4eZ5hM68bNFALWpSrYLabHAkdzO7hYA/96w35/6NveF2pdQR0lvvzej0vWEh6o1Tp7fAe5gR+rbM4dpZ+5HEMSHB+OPl8i+Nz0iJ1HOpKlgDrELCKdU/Rti/07gvEeP525TXTpDp/O3DJWAAAAABJRU5ErkJggg==";function Re({booth:t,isViewingBooth:g,isSelected:e,onDeselect:L,onPickBooth:I,onSelect:S,isUnselecting:d,visible:R,cellSize:f,canPick:O,hasPickedBooth:Q,onAddVendorToBooth:U,onRemoveVendorFromBooth:P}){const[F,v]=l.useState(0),[h,r]=l.useState(0),m=l.useRef(null),[k,p]=l.useState(0),[G,x]=l.useState(0),[Y,J]=l.useState(!1),[C,X]=l.useState(null),[B,$]=l.useState(12),y=l.useRef(null),[T,ae]=l.useState(!0);function E(s){const K=m.current,Z=window.getComputedStyle(K),D=document.createElement("span");D.style.font=Z.font,D.style.fontSize=s+"px",D.style.fontFamily=Z.fontFamily,D.style.fontWeight=Z.fontWeight,D.style.position="absolute",D.style.visibility="hidden",D.style.whiteSpace="nowrap",D.textContent=K.textContent,document.body.appendChild(D);const ce=D.offsetWidth;return document.body.removeChild(D),ce}function H(s){if(m.current){const K=m.current;return E(s-1)>K.offsetWidth&&s-1>8?H(s-1):s-1}return s}l.useEffect(()=>{setTimeout(()=>{m.current&&$(H(B))},100)},[]),l.useEffect(()=>{t.initialElement.classList.contains("cell")&&(console.log("Setting cell to initial element:",t.initialElement.children[0]),X(t.initialElement.children[0])),v(t.initialElement.offsetLeft),r(t.initialElement.offsetTop),p(t.initialElement.offsetLeft),x(t.initialElement.offsetTop)},[t]);const z=()=>{if(Y)return;if(C==null){v(t.initialElement.offsetLeft),p(t.initialElement.offsetLeft),r(t.initialElement.offsetTop),x(t.initialElement.offsetTop);return}const s=C.offsetTop,K=C.offsetLeft;v(K),r(s),p(K),x(s)};return l.useEffect(()=>(window.addEventListener("resize",z),()=>{window.removeEventListener("resize",z)}),[C,Y]),F==0||h==0||!T?null:n.jsxs(n.Fragment,{children:[n.jsx("div",{id:t.id,ref:y,className:`booth draggable-item ${Q?"viewing":""} ${Y?"dragging":e?"selected":""} ${t.user!=null&&!g?"no-select":""} ${R?"":"invisible"} ${O?"":"cannot-pick"}`,style:{top:`${h}px`,left:`${F}px`,width:`${t.cellsLong*f-(e?4:0)}px`,height:`${t.cellsTall*f-(e?4:0)}px`,transformOrigin:"center center",fontSize:`${B}px`},onClick:s=>{s.stopPropagation(),!Q&&(t.user!=null&&!g||O&&(e?L():S(t.id)))},children:n.jsx("div",{className:"custom-icon",children:n.jsxs("div",{className:"booth-inner",children:[n.jsx("p",{children:t.name}),n.jsxs("p",{className:"booth-sizing",children:[t.cellsLong,"ft x ",t.cellsTall,"ft"]}),n.jsx("p",{ref:m,children:t.user==null?"Open ":t.user.businessName})]})})}),(e||d)&&n.jsx(n.Fragment,{children:/Mobi|Android/i.test(navigator.userAgent)?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`draggable-item-options mobile-left ${d?"exiting":""}`,style:{top:`${h+t.cellsTall*f/2-10}px`,left:`${F+t.cellsLong*f/2-t.cellsLong/2-20}px`,width:"10px"},children:g?n.jsx("img",{src:me,alt:"Person Add",className:"person-icon",onClick:s=>{s.stopPropagation(),U(t.id)}}):n.jsx("img",{src:ge,alt:"pick",className:"pick-icon",onClick:s=>{s.stopPropagation(),I(t.id)}})}),n.jsx("div",{className:`draggable-item-options mobile-right ${d?"exiting":""}`,style:{top:`${h+t.cellsTall*f/2-10}px`,left:`${F+t.cellsLong*f/2+t.cellsLong*f/2+10}px`,width:"10px"},children:g&&t.user!=null?n.jsx("img",{src:V,alt:"delete",className:"delete-icon",onClick:s=>{s.stopPropagation(),P(t.id)}}):g?n.jsx(n.Fragment,{}):n.jsx(n.Fragment,{children:n.jsx("img",{src:V,alt:"delete",className:"delete-icon",onClick:s=>{s.stopPropagation(),L()}})})})]}):n.jsxs("div",{className:`draggable-item-options ${d?"exiting":""}`,style:{top:`${h+t.cellsTall*f/2-t.cellsTall*f/2-20}px`,left:`${F+t.cellsLong*f/2-t.cellsLong*f/2}px`,width:`${t.cellsLong*f}px`},children:[g&&t.user==null?n.jsx("img",{src:me,alt:"Person Add",className:"person-icon",onClick:s=>{s.stopPropagation(),U(t.id)}}):g&&t.user!=null?n.jsx(n.Fragment,{}):n.jsx("img",{src:ge,alt:"pick",className:"pick-icon",onClick:s=>{s.stopPropagation(),I(t.id)}}),g&&t.user!=null?n.jsx("img",{src:V,alt:"delete",className:"delete-icon",onClick:s=>{s.stopPropagation(),P(t.id)}}):g?n.jsx(n.Fragment,{}):n.jsx(n.Fragment,{children:n.jsx("img",{src:V,alt:"delete",className:"delete-icon",onClick:s=>{s.stopPropagation(),L()}})})]})})]})}export{Le as A,Re as B,Te as D,we as S};
