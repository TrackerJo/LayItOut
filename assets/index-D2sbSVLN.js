import{j as e,r,c as D}from"./index-_mSZXrjJ.js";import{l as N,i as M}from"./auth-iroOyPOj.js";import{D as k,A as Z,B as L,d as Q,a as J,b as H,c as S,e as P,f,g as E,h as z,i as U}from"./firestore-BIrJGVi9.js";import{T as w,L as O}from"./link-DQZq8SUn.js";const W="/LayItOut/assets/person-B6dEeLiq.png",Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE02lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI1LTA4LTA1PC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPjczNzgwNjZhLTY1ZDEtNGI2MC1hYzBhLTY2N2M4OWFkMGMyYzwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6RmJJZD41MjUyNjU5MTQxNzk1ODA8L0F0dHJpYjpGYklkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6ZGM9J2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJz4KICA8ZGM6dGl0bGU+CiAgIDxyZGY6QWx0PgogICAgPHJkZjpsaSB4bWw6bGFuZz0neC1kZWZhdWx0Jz5hZGQtaXRlbSAtIDM8L3JkZjpsaT4KICAgPC9yZGY6QWx0PgogIDwvZGM6dGl0bGU+CiA8L3JkZjpEZXNjcmlwdGlvbj4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnBkZj0naHR0cDovL25zLmFkb2JlLmNvbS9wZGYvMS4zLyc+CiAgPHBkZjpBdXRob3I+U2FyYWggS2VtbWVOYXNoPC9wZGY6QXV0aG9yPgogPC9yZGY6RGVzY3JpcHRpb24+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp4bXA9J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8nPgogIDx4bXA6Q3JlYXRvclRvb2w+Q2FudmEgKFJlbmRlcmVyKSBkb2M9REFHdTJ5dUVOWkEgdXNlcj1VQUZqR1c2eHRDUSBicmFuZD1bQVJDSElWRURdIEZvcnQgV2F5bmUgQ29tbXVuaXR5IFNjaG9vbHMgdGVtcGxhdGU9PC94bXA6Q3JlYXRvclRvb2w+CiA8L3JkZjpEZXNjcmlwdGlvbj4KPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0ncic/Puza03IAAANVSURBVHic7dw/aBNRAMfxX/+AdrDkFAcX5QIqLi7BMRW5JSIOiruoxE6CQxE8cHE4HCsiFOPg5ORkHeJwFHKjZqiI6HIHBd3snX/Aoi11aBwEW5Lz3rvfld9nbF7z3vG9cJeXkDEIlbGyFyB/UxAyCkJGQcgoCBkFIaMgZBSEjIKQURAyCkJGQcgoCBkFIaMgZBSEjIKQURAyCkJGQcgoCBkFIaMgZHZFENfzJwEgCYP1stfyvyobpOY2p+uef9upz1wGcGjw509p3HsSh8G9LIm+lbm+vCoZpOY29zba3S6A09sMWep3WueyJPphc11FGC97AXk02t0H2D4GAJxptLvzttZTpMoFcT3/AIArQwy9WnOb+0yvp2iVCwLgBICJIcZNOvXmSdOLKVoVg4xy1usVYsEoNyKVu2mpYpBdTUHIKAgZBSGjIGQUhIyCkFEQMgpCRkHIKAgZBSEzaXtC1/OnARwHsB85Nv8ct9kYaaznb446B4BNAKsAPiRh8DXH/+dmbTe05jb3NNrd+wCuoYQTIad1AI/6ndbNLIl+2ZjQSpCa25xotLuLAM7amM+AxX6ndSFLog3TE1m5htQ9/waqGwMAzg+OwTgrQZz6zKyNeUyydQzGg7ieP4ati3jVHRsci1G2bnsr91HqP1g5BuNBkjDYBPDe9DwWLA+OxSgrr5A07j22MY9JadxbsDGPlSBxGMwDeGFjLkOex2Fg5aSyEiRLoo1+p3UJQAeA8Xv5Aq2mce9Wv9O6aOM9CFDCxbaArZNTTn3m7jBj07h3J02i16POga2tk89pHC3beof+h/UtjMHe0KvcT+D54059ZqihaRL1kzDo5p6rBNrtJaMgZBSEjIKQURAyCkJGQcgoCBkFIaMgZBSEjIKQURAyVQySjTDW6rcOi1C5IGkcvQHwc4ihGwDeGl5O4SoXJEui79j65HFHadxbSMLgi4UlFapyQQCg32nNAXi5w5ClOAzmbK2nSMP8iAudtWxlPY2jp1PO4ZUp58hRAAcHD31M497Dd89mr2dJtFbmGvPaDV9g00/8iTkKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpD5DYoct+vaJyOJAAAAAElFTkSuQmCC";function V({area:t,onClick:p,deleteArea:l}){return e.jsx("div",{className:"area-tile",onClick:()=>p(t.id),children:e.jsxs("div",{className:"area-tile-content",children:[e.jsx("div",{className:"area-preview-container",children:e.jsx("img",{src:t.previewImage,alt:"",className:"area-preview-img"})}),e.jsxs("div",{className:"area-info",children:[e.jsx("h3",{children:t.name}),e.jsx("div",{className:"area-actions",children:e.jsx("img",{src:w,alt:"",className:"area-trash",onClick:async o=>{o.stopPropagation(),window.confirm("By clicking OK, you will delete this area and all of the designs using this area. Are you sure?")&&l(t.id)}})})]})]})})}function F({dialogRef:t,closeDialog:p,createDesign:l,areas:o}){const[i,d]=r.useState(""),[m,A]=r.useState(!1),[n,I]=r.useState(null),[h,c]=r.useState(null);async function j(){if(i.trim()===""){alert("Design name cannot be empty");return}if(!n){alert("Please select an area");return}A(!0);const s=new k({id:(Math.random()*1e6).toString(),name:i,areaId:n.id,sections:n.sections,previewImage:n.previewImage,inventoryItems:[...n.inventoryItems]});h&&(s.sections=h.sections,s.previewImage=h.previewImage,s.inventoryItems=h.inventoryItems),await l(s),A(!1),d(""),I(null),c(null)}return e.jsxs("dialog",{ref:t,className:"create-design-dialog",children:[e.jsxs("div",{className:"create-design-dialog-div",children:[e.jsx("h2",{children:"Create Design"}),e.jsxs("div",{className:"create-design-row",children:[e.jsx("label",{htmlFor:"design-name",children:"Name:"}),e.jsx("input",{type:"text",id:"design-name",name:"design-name",onChange:s=>d(s.target.value??""),value:i})]}),e.jsxs("div",{className:"create-design-row",children:[e.jsx("label",{htmlFor:"design-area",children:"Area:"}),e.jsxs("select",{id:"design-area",name:"design-area",onChange:s=>{const u=s.target.value,y=o.find(a=>a.id===u)||null;I(y)},value:n?.id||"",children:[e.jsx("option",{value:"",children:"Select an area"}),o.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),n&&n.templates.length>0&&e.jsxs("div",{className:"create-design-row",children:[e.jsx("label",{htmlFor:"design-area",children:"Template:"}),e.jsxs("select",{id:"design-area",name:"design-area",onChange:s=>{const u=s.target.value,y=n.templates.find(a=>a.id===u)||null;c(y)},value:h?.id||"",children:[e.jsx("option",{value:"",children:"Select a template (Optional)"}),n.templates.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx("button",{className:"action-btn",onClick:j,children:"Create"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:()=>{p(),d(""),I(null),c(null)},children:"Close"})]}),m&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"loader"})})]})}const G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE1GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI1LTEwLTAxPC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPjU2OWI2MjhjLTA3MGQtNDZlMi05MTMyLWQyYjA1ZGE3NjRjNjwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6RmJJZD41MjUyNjU5MTQxNzk1ODA8L0F0dHJpYjpGYklkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6ZGM9J2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJz4KICA8ZGM6dGl0bGU+CiAgIDxyZGY6QWx0PgogICAgPHJkZjpsaSB4bWw6bGFuZz0neC1kZWZhdWx0Jz5hZGQtaXRlbSAtIDEzPC9yZGY6bGk+CiAgIDwvcmRmOkFsdD4KICA8L2RjOnRpdGxlPgogPC9yZGY6RGVzY3JpcHRpb24+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6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";function T({design:t,areaName:p,onClick:l,deleteDesign:o}){return e.jsxs("div",{className:"design-tile",onClick:()=>l(t.id),children:[e.jsx("div",{className:"design-preview-container",children:e.jsx("img",{src:t.previewImage,alt:"",className:"design-preview-img"})}),e.jsxs("div",{className:"design-info",children:[e.jsx("h3",{children:t.name}),e.jsxs("p",{className:"design-area-name",children:["Area: ",p]}),e.jsxs("div",{className:"design-actions",children:[e.jsx("img",{src:O,alt:"",className:"design-link",onClick:async i=>{i.stopPropagation();const d=localStorage.getItem("companyId"),m=window.location.origin+`/LayItOut/Layout/?companyId=${d}&areaId=${t.areaId}&type=client-edit-design&designId=${t.id}&designName=${t.name}`;await navigator.clipboard.writeText(m),alert("Design link copied to clipboard!")}}),e.jsx("img",{src:G,alt:"",className:"design-preview",onClick:async i=>{i.stopPropagation();const d=localStorage.getItem("companyId"),m=window.location.origin+`/LayItOut/Layout/?companyId=${d}&areaId=${t.areaId}&type=public-preview&designId=${t.id}&designName=${t.name}`;await navigator.clipboard.writeText(m),alert("Preview link copied to clipboard!")}}),e.jsx("img",{src:w,alt:"",className:"design-trash",onClick:async i=>{i.stopPropagation(),window.confirm("By clicking OK, you will delete this design. Are you sure?")&&o(t.id)}})]})]})]})}function X({dialogRef:t,closeDialog:p}){return e.jsx("dialog",{ref:t,className:"account-dialog",children:e.jsxs("div",{className:"account-dialog-div",children:[e.jsx("h2",{children:"Account Settings"}),e.jsx("button",{className:"action-btn",onClick:()=>{N(),p()},children:"Log Out"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:p,children:"Close"})]})})}function K({dialogRef:t,closeDialog:p,createArea:l}){const[o,i]=r.useState(""),[d,m]=r.useState(10),[A,n]=r.useState(10),[I,h]=r.useState(!1);return e.jsxs("dialog",{ref:t,className:"create-area-dialog",children:[e.jsxs("div",{className:"create-area-dialog-div",children:[e.jsx("h2",{children:"Create Area"}),e.jsxs("div",{className:"create-area-row",children:[e.jsx("label",{htmlFor:"area-name",children:"Name:"}),e.jsx("input",{type:"text",id:"area-name",name:"area-name",onChange:c=>i(c.target.value??""),value:o})]}),e.jsxs("div",{className:"create-area-row create-area-size",children:[e.jsx("label",{htmlFor:"area-width",children:"Size (in feet):"}),e.jsx("input",{type:"number",id:"area-width",name:"area-width",min:"1",value:d,onChange:c=>m(parseFloat(c.target.value)??1)}),e.jsx("span",{children:" x "}),e.jsx("input",{type:"number",id:"area-height",name:"area-height",min:"1",value:A,onChange:c=>n(parseFloat(c.target.value)??1)})]}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:async()=>{if(o.trim()===""){alert("Area name cannot be empty");return}if(d<=0||A<=0){alert("Area dimensions must be greater than zero");return}h(!0);const c=new Z({name:o,width:d,height:A,id:o.toLowerCase().replace(/\s+/g,"-")+"-"+Date.now(),previewImage:"",sections:[],templates:[],inventoryItems:[]});await l(c),h(!1),i(""),m(1),n(1)},children:"Create Area"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:()=>{i(""),m(10),n(10),p()},children:"Close"})]}),I&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"loader"})})]})}function q({dialogRef:t,closeDialog:p,createBoothMap:l,areas:o}){const[i,d]=r.useState(""),[m,A]=r.useState(!1),[n,I]=r.useState(null),[h,c]=r.useState(null);async function j(){if(i.trim()===""){alert("BoothMap name cannot be empty");return}if(!n){alert("Please select an area");return}A(!0);const s=new L({id:(Math.random()*1e6).toString(),name:i,areaId:n.id,sections:n.sections,previewImage:n.previewImage,inventoryItems:[...n.inventoryItems]});h&&(s.sections=h.sections,s.previewImage=h.previewImage,s.inventoryItems=h.inventoryItems),await l(s),window.location.href=`/LayItOut/Layout/?companyId=${localStorage.getItem("companyId")}&areaId=${s.areaId}&type=create-boothMap&boothMapId=${s.id}&boothMapName=${s.name}`,A(!1),d(""),I(null),c(null)}return e.jsxs("dialog",{ref:t,className:"create-boothMap-dialog",children:[e.jsxs("div",{className:"create-boothMap-dialog-div",children:[e.jsx("h2",{children:"Create Booth Map"}),e.jsxs("div",{className:"create-boothMap-row",children:[e.jsx("label",{htmlFor:"boothMap-name",children:"Name:"}),e.jsx("input",{type:"text",id:"boothMap-name",name:"boothMap-name",onChange:s=>d(s.target.value??""),value:i})]}),e.jsxs("div",{className:"create-boothMap-row",children:[e.jsx("label",{htmlFor:"boothMap-area",children:"Area:"}),e.jsxs("select",{id:"boothMap-area",name:"boothMap-area",onChange:s=>{const u=s.target.value,y=o.find(a=>a.id===u)||null;I(y)},value:n?.id||"",children:[e.jsx("option",{value:"",children:"Select an area"}),o.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),n&&n.templates.length>0&&e.jsxs("div",{className:"create-boothMap-row",children:[e.jsx("label",{htmlFor:"boothMap-area",children:"Template:"}),e.jsxs("select",{id:"boothMap-area",name:"boothMap-area",onChange:s=>{const u=s.target.value,y=n.templates.find(a=>a.id===u)||null;c(y)},value:h?.id||"",children:[e.jsx("option",{value:"",children:"Select a template (Optional)"}),n.templates.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx("button",{className:"action-btn",onClick:j,children:"Create"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{className:"action-btn",onClick:()=>{p(),d(""),I(null),c(null)},children:"Close"})]}),m&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"loader"})})]})}function $({boothMap:t,areaName:p,onClick:l,deleteBoothMap:o}){return e.jsxs("div",{className:"boothMap-tile",onClick:()=>l(t.id),children:[e.jsx("div",{className:"boothMap-preview-container",children:e.jsx("img",{src:t.previewImage,alt:"",className:"boothMap-preview-img"})}),e.jsxs("div",{className:"boothMap-info",children:[e.jsx("h3",{children:t.name}),e.jsxs("p",{className:"boothMap-area-name",children:["Area: ",p]}),e.jsxs("div",{className:"boothMap-actions",children:[e.jsx("img",{src:G,alt:"",className:"boothMap-preview",onClick:async i=>{i.stopPropagation();const d=localStorage.getItem("companyId"),m=window.location.origin+`/LayItOut/Layout/?companyId=${d}&areaId=${t.areaId}&type=public-preview-boothMap&boothMapId=${t.id}&designName=${t.name}`;await navigator.clipboard.writeText(m),alert("Preview link copied to clipboard!")}}),e.jsx("img",{src:w,alt:"",className:"boothMap-trash",onClick:async i=>{i.stopPropagation(),window.confirm("By clicking OK, you will delete this BoothMap. Are you sure?")&&o(t.id)}})]})]})]})}D.createRoot(document.getElementById("root")).render(e.jsx(_,{}));function _(){const[t,p]=r.useState(/Mobi|Android/i.test(navigator.userAgent)),[l,o]=r.useState("designs"),[i,d]=r.useState([]),[m,A]=r.useState([]),[n,I]=r.useState([]),[h,c]=r.useState(!0),j=r.useRef(null),s=r.useRef(null),u=r.useRef(null),y=r.useRef(null);return r.useEffect(()=>{M();const g=new URLSearchParams(window.location.search).get("view");g==="designs"?o("designs"):g==="areas"?o("areas"):g==="boothmaps"&&o("boothmaps");async function B(){const v=localStorage.getItem("companyId");if(!v){N();return}const x=await E(v),C=[];(await Promise.all(x.map(b=>z(v,b.id)))).forEach(b=>{C.push(...b)});const R=[];(await Promise.all(x.map(b=>U(v,b.id)))).forEach(b=>{R.push(...b)}),A([...x]),d([...R]),I([...C]),c(!1)}B()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"App",children:[e.jsx("h1",{className:"title",children:"LayItOut"}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loader-backdrop"}),e.jsx("div",{className:"loader"})]}),e.jsxs("div",{className:"dashboard",children:[e.jsxs("div",{className:"sidebar",children:[e.jsx("div",{className:"account-div",children:e.jsx("img",{src:W,alt:"Account Icon",className:"account-icon",onClick:()=>{j.current?.showModal()}})}),e.jsxs("div",{className:"nav-buttons",children:[e.jsx("button",{className:`nav-button ${l=="designs"?"selected":""}`,onClick:()=>o("designs"),children:"Designs"}),e.jsx("button",{className:`nav-button ${l=="boothmaps"?"selected":""}`,onClick:()=>o("boothmaps"),children:"Booth Maps"}),e.jsx("button",{className:`nav-button ${l=="areas"?"selected":""}`,onClick:()=>o("areas"),children:"Areas"})]})]}),e.jsxs("div",{className:"content",children:[l=="designs"&&i.length==0&&e.jsx("div",{className:"no-designs",children:e.jsx("h3",{children:"No Designs Yet"})}),l=="areas"&&m.length==0&&e.jsx("div",{className:"no-areas",children:e.jsx("h3",{children:"No Areas Yet"})}),l=="boothmaps"&&n.length==0&&e.jsx("div",{className:"no-boothmaps",children:e.jsx("h3",{children:"No BoothMaps Yet"})}),l=="areas"&&e.jsx("div",{className:"area-tiles",children:m.map(a=>e.jsx(V,{area:a,onClick:()=>{const g=localStorage.getItem("companyId");window.location.href=`/LayItOut/Layout/?companyId=${g}&areaId=${a.id}&type=view-area`},deleteArea:async()=>{A(m.filter(g=>g.id!==a.id)),d(i.filter(g=>g.areaId!==a.id)),c(!0),await Q(localStorage.getItem("companyId"),a.id),c(!1)}},a.id))}),l=="designs"&&e.jsx("div",{className:"design-tiles",children:i.map(a=>e.jsx(T,{areaName:m.find(g=>g.id==a.areaId)?.name||"",design:a,onClick:()=>{const g=localStorage.getItem("companyId");window.location.href=`/LayItOut/Layout/?companyId=${g}&areaId=${a.areaId}&type=view-design&designId=${a.id}&designName=${a.name}`},deleteDesign:async()=>{d(i.filter(g=>g.id!==a.id)),c(!0),await J(localStorage.getItem("companyId"),a.areaId,a.id),c(!1)}},a.id))}),l=="boothmaps"&&e.jsx("div",{className:"boothmap-tiles",children:n.map(a=>e.jsx($,{areaName:m.find(g=>g.id==a.areaId)?.name||"",boothMap:a,onClick:()=>{const g=localStorage.getItem("companyId");window.location.href=`/LayItOut/Layout/?companyId=${g}&areaId=${a.areaId}&type=view-boothMap&boothMapId=${a.id}&boothMapName=${a.name}`},deleteBoothMap:async()=>{I(n.filter(g=>g.id!==a.id)),c(!0),await H(localStorage.getItem("companyId"),a.areaId,a.id),c(!1)}},a.id))}),l=="designs"||!t?e.jsx("div",{className:"plus-icon",onClick:()=>{l=="designs"?s.current?.showModal():l=="boothmaps"?y.current?.showModal():l=="areas"&&u.current?.showModal()},children:e.jsx("img",{src:Y,alt:"Plus Icon"})}):null]})]})]}),e.jsx(F,{areas:m,dialogRef:s,closeDialog:()=>s.current?.close(),createDesign:async a=>{d([...i,a]),await S(localStorage.getItem("companyId"),a.areaId,a),s.current?.close()}}),e.jsx(X,{dialogRef:j,closeDialog:()=>j.current?.close()}),e.jsx(K,{dialogRef:u,closeDialog:()=>u.current?.close(),createArea:async a=>{await P(localStorage.getItem("companyId"),a),A([...m,a]),u.current?.close(),window.location.href=`/LayItOut/Layout/?companyId=${localStorage.getItem("companyId")}&areaId=${a.id}&type=create-area&stage=placing-sections`}}),e.jsx(q,{areas:m,dialogRef:y,closeDialog:()=>y.current?.close(),createBoothMap:async a=>{I([...n,a]),await f(localStorage.getItem("companyId"),a.areaId,a),y.current?.close()}})]})}
